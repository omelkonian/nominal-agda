<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Swap.Derive</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">-v</a> <a id="16" class="Pragma">nominal:100</a> <a id="28" class="Symbol">#-}</a>
<a id="32" class="Keyword">open</a> <a id="37" class="Keyword">import</a> <a id="44" href="Prelude.Init.html" class="Module">Prelude.Init</a> <a id="57" class="Keyword">hiding</a> <a id="64" class="Symbol">(</a><a id="65" href="Data.Product.html#5317" class="Function">swap</a><a id="69" class="Symbol">)</a>
<a id="71" class="Keyword">open</a> <a id="76" class="Keyword">import</a> <a id="83" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Prelude.Monad.html" class="Module">Prelude.Monad</a>
<a id="123" class="Keyword">open</a> <a id="128" class="Keyword">import</a> <a id="135" href="Prelude.Semigroup.html" class="Module">Prelude.Semigroup</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Prelude.Show.html" class="Module">Prelude.Show</a>
<a id="178" class="Keyword">open</a> <a id="183" class="Keyword">import</a> <a id="190" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="202" class="Keyword">open</a> <a id="207" class="Keyword">import</a> <a id="214" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>
<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>

<a id="287" class="Keyword">open</a> <a id="292" href="Prelude.Init.html#10254" class="Module">Meta</a>
<a id="297" class="Keyword">open</a> <a id="302" class="Keyword">import</a> <a id="309" href="Prelude.Generics.html" class="Module">Prelude.Generics</a>
<a id="326" class="Keyword">open</a> <a id="331" href="Prelude.Generics.html#9748" class="Module">Debug</a> <a id="337" class="Symbol">(</a><a id="338" class="String">&quot;nominal&quot;</a> <a id="348" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="350" class="Number">100</a><a id="353" class="Symbol">)</a>

<a id="356" class="Keyword">module</a> <a id="363" href="Swap.Derive.html" class="Module">Swap.Derive</a> <a id="375" class="Symbol">(</a><a id="376" href="Swap.Derive.html#376" class="Bound">Atom</a> <a id="381" class="Symbol">:</a> <a id="383" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="386" class="Symbol">)</a> <a id="388" class="Symbol">⦃</a> <a id="390" href="Swap.Derive.html#390" class="Bound">_</a> <a id="392" class="Symbol">:</a> <a id="394" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="400" href="Swap.Derive.html#376" class="Bound">Atom</a> <a id="405" class="Symbol">⦄</a> <a id="407" class="Keyword">where</a>

<a id="414" class="Keyword">open</a> <a id="419" class="Keyword">import</a> <a id="426" href="Swap.Base.html" class="Module">Swap.Base</a> <a id="436" href="Swap.Derive.html#376" class="Bound">Atom</a> <a id="441" class="Symbol">⦃</a> <a id="443" href="Function.Base.html#4812" class="Function">it</a> <a id="446" class="Symbol">⦄</a>

<a id="getPatTele"></a><a id="449" href="Swap.Derive.html#449" class="Function">getPatTele</a> <a id="460" class="Symbol">:</a> <a id="462" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a> <a id="467" class="Symbol">→</a> <a id="469" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="472" href="Prelude.Generics.html#1005" class="Function">PatTelescope</a>
<a id="485" href="Swap.Derive.html#449" class="Function">getPatTele</a> <a id="496" href="Swap.Derive.html#496" class="Bound">cn</a> <a id="499" class="Symbol">=</a> <a id="501" class="Keyword">do</a>
  <a id="506" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="512" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="514" class="String">&quot;Getting pattern telescope for constructor: &quot;</a> <a id="560" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="562" href="Prelude.Show.html#315" class="Field">show</a> <a id="567" href="Swap.Derive.html#496" class="Bound">cn</a>
  <a id="572" href="Swap.Derive.html#572" class="Bound">ty</a> <a id="575" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="577" href="Agda.Builtin.Reflection.html#9209" class="Postulate">getType</a> <a id="585" href="Swap.Derive.html#496" class="Bound">cn</a>
  <a id="590" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="596" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="598" class="String">&quot;  ty: &quot;</a> <a id="607" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="609" href="Prelude.Show.html#315" class="Field">show</a> <a id="614" href="Swap.Derive.html#572" class="Bound">ty</a>
  <a id="619" href="Agda.Builtin.Reflection.html#7374" class="InductiveConstructor">data-cons</a> <a id="629" href="Swap.Derive.html#629" class="Bound">n</a> <a id="631" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="633" href="Agda.Builtin.Reflection.html#9245" class="Postulate">getDefinition</a> <a id="647" href="Swap.Derive.html#496" class="Bound">cn</a>
    <a id="654" class="Keyword">where</a> <a id="660" class="CatchallClause Symbol">_</a> <a id="662" class="Symbol">→</a> <a id="664" href="Prelude.Generics.html#9686" class="Function Operator">_IMPOSSIBLE_</a>
  <a id="679" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="685" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="687" class="String">&quot;  n: &quot;</a> <a id="695" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="697" href="Prelude.Show.html#315" class="Field">show</a> <a id="702" href="Swap.Derive.html#629" class="Bound">n</a>
  <a id="706" href="Agda.Builtin.Reflection.html#7252" class="InductiveConstructor">data-type</a> <a id="716" href="Swap.Derive.html#716" class="Bound">ps</a> <a id="719" class="Symbol">_</a> <a id="721" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="723" href="Agda.Builtin.Reflection.html#9245" class="Postulate">getDefinition</a> <a id="737" href="Swap.Derive.html#629" class="Bound">n</a>
    <a id="743" class="Keyword">where</a> <a id="749" class="CatchallClause Symbol">_</a> <a id="751" class="Symbol">→</a> <a id="753" href="Prelude.Generics.html#9686" class="Function Operator">_IMPOSSIBLE_</a>
  <a id="768" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="774" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="776" class="String">&quot;  ps: &quot;</a> <a id="785" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="787" href="Prelude.Show.html#315" class="Field">show</a> <a id="792" href="Swap.Derive.html#716" class="Bound">ps</a>
  <a id="797" class="Keyword">let</a> <a id="801" href="Swap.Derive.html#801" class="Bound">tys</a> <a id="805" class="Symbol">=</a> <a id="807" href="Data.List.Base.html#7427" class="Function">drop</a> <a id="812" href="Swap.Derive.html#716" class="Bound">ps</a> <a id="815" class="Symbol">(</a><a id="816" href="Prelude.Generics.html#4237" class="Function">argTys</a> <a id="823" href="Swap.Derive.html#572" class="Bound">ty</a><a id="825" class="Symbol">)</a>
  <a id="829" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="835" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="837" class="String">&quot;  argTys: &quot;</a> <a id="850" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="852" href="Prelude.Show.html#315" class="Field">show</a> <a id="857" href="Swap.Derive.html#801" class="Bound">tys</a>
  <a id="863" class="Keyword">let</a> <a id="867" href="Swap.Derive.html#867" class="Bound">tel</a> <a id="871" class="Symbol">=</a> <a id="873" href="Data.List.Base.html#1544" class="Function">map</a> <a id="877" class="Symbol">(</a><a id="878" class="String">&quot;_&quot;</a> <a id="882" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="884" class="Symbol">)</a> <a id="886" href="Swap.Derive.html#801" class="Bound">tys</a>
  <a id="892" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="898" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="900" class="String">&quot;  tel: &quot;</a> <a id="910" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="912" href="Prelude.Show.html#315" class="Field">show</a> <a id="917" href="Swap.Derive.html#867" class="Bound">tel</a>
  <a id="923" href="Prelude.Monad.html#475" class="Field">return</a> <a id="930" href="Swap.Derive.html#867" class="Bound">tel</a>

<a id="935" class="Symbol">{-#</a> <a id="939" class="Keyword">TERMINATING</a> <a id="951" class="Symbol">#-}</a>
<a id="derive↔"></a><a id="955" href="Swap.Derive.html#955" class="Function">derive↔</a> <a id="963" class="Symbol">:</a> <a id="965" href="Agda.Builtin.Reflection.html#7179" class="Datatype">Definition</a> <a id="976" class="Symbol">→</a> <a id="978" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="981" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a>
<a id="986" href="Swap.Derive.html#955" class="Function">derive↔</a> <a id="994" href="Swap.Derive.html#994" class="Bound">d</a> <a id="996" class="Keyword">with</a> <a id="1001" href="Swap.Derive.html#994" class="Bound">d</a>
<a id="1003" class="Symbol">...</a> <a id="1007" class="Symbol">|</a> <a id="1009" href="Agda.Builtin.Reflection.html#7311" class="InductiveConstructor">record-type</a> <a id="1021" href="Swap.Derive.html#1021" class="Bound">rn</a> <a id="1024" href="Swap.Derive.html#1024" class="Bound">fs</a> <a id="1027" class="Symbol">=</a> <a id="1029" class="Keyword">do</a>
  <a id="1034" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1040" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1042" class="String">&quot;RECORD {name = &quot;</a> <a id="1060" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1062" href="Prelude.Show.html#315" class="Field">show</a> <a id="1067" href="Swap.Derive.html#1021" class="Bound">rn</a> <a id="1070" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1072" class="String">&quot;; fs = &quot;</a> <a id="1082" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1084" href="Prelude.Show.html#315" class="Field">show</a> <a id="1089" href="Swap.Derive.html#1024" class="Bound">fs</a> <a id="1092" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1094" class="String">&quot;}&quot;</a>
  <a id="1100" href="Prelude.Monad.html#475" class="Field">return</a> <a id="1107" href="Prelude.Generics.html#2104" class="InductiveConstructor Operator">`λ⟦</a> <a id="1111" class="String">&quot;𝕒&quot;</a> <a id="1115" href="Prelude.Generics.html#2104" class="InductiveConstructor Operator">∣</a> <a id="1117" class="String">&quot;𝕓&quot;</a> <a id="1121" href="Prelude.Generics.html#2104" class="InductiveConstructor Operator">∣</a> <a id="1123" class="String">&quot;r&quot;</a> <a id="1127" href="Prelude.Generics.html#2104" class="InductiveConstructor Operator">⇒</a> <a id="1129" href="Agda.Builtin.Reflection.html#5013" class="InductiveConstructor">pat-lam</a> <a id="1137" class="Symbol">(</a><a id="1138" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Swap.Derive.html#1216" class="Function">mkClause</a> <a id="1152" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1154" href="Reflection.Argument.html#2521" class="Function">unArg</a><a id="1159" class="Symbol">)</a> <a id="1161" href="Swap.Derive.html#1024" class="Bound">fs</a><a id="1163" class="Symbol">)</a> <a id="1165" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1168" href="Prelude.Generics.html#2104" class="InductiveConstructor Operator">⟧</a>
  <a id="1172" class="Keyword">where</a>
    <a id="1182" href="Swap.Derive.html#1182" class="Function">♯a</a> <a id="1185" class="Symbol">=</a> <a id="1187" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="1189" class="Number">2</a><a id="1190" class="Symbol">;</a> <a id="1192" href="Swap.Derive.html#1192" class="Function">♯b</a> <a id="1195" class="Symbol">=</a> <a id="1197" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="1199" class="Number">1</a><a id="1200" class="Symbol">;</a> <a id="1202" href="Swap.Derive.html#1202" class="Function">♯r</a> <a id="1205" class="Symbol">=</a> <a id="1207" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="1209" class="Number">0</a>

    <a id="1216" href="Swap.Derive.html#1216" class="Function">mkClause</a> <a id="1225" class="Symbol">:</a> <a id="1227" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a> <a id="1232" class="Symbol">→</a> <a id="1234" href="Agda.Builtin.Reflection.html#4745" class="Datatype">Clause</a>
    <a id="1245" href="Swap.Derive.html#1216" class="Function">mkClause</a> <a id="1254" href="Swap.Derive.html#1254" class="Bound">fn</a> <a id="1257" class="Symbol">=</a> <a id="1259" href="Agda.Builtin.Reflection.html#5758" class="InductiveConstructor">clause</a> <a id="1266" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1269" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1271" href="Reflection.Argument.html#1209" class="InductiveConstructor">vArg</a> <a id="1276" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1278" href="Agda.Builtin.Reflection.html#5629" class="InductiveConstructor">proj</a> <a id="1283" href="Swap.Derive.html#1254" class="Bound">fn</a> <a id="1286" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="1288" class="Symbol">(</a><a id="1289" class="Keyword">quote</a> <a id="1295" href="Swap.Base.html#189" class="Field">swap</a> <a id="1300" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∙⟦</a> <a id="1303" href="Swap.Derive.html#1182" class="Function">♯a</a> <a id="1306" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∣</a> <a id="1308" href="Swap.Derive.html#1192" class="Function">♯b</a> <a id="1311" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∣</a> <a id="1313" href="Swap.Derive.html#1254" class="Bound">fn</a> <a id="1316" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">∙⟦</a> <a id="1319" href="Swap.Derive.html#1202" class="Function">♯r</a> <a id="1322" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">⟧</a> <a id="1324" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">⟧</a><a id="1325" class="Symbol">)</a>
<a id="1327" class="Symbol">...</a> <a id="1331" class="Symbol">|</a> <a id="1333" href="Agda.Builtin.Reflection.html#7252" class="InductiveConstructor">data-type</a> <a id="1343" href="Swap.Derive.html#1343" class="Bound">ps</a> <a id="1346" href="Swap.Derive.html#1346" class="Bound">cs</a> <a id="1349" class="Symbol">=</a> <a id="1351" class="Keyword">do</a>
  <a id="1356" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1362" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1364" class="String">&quot;DATATYPE {pars = &quot;</a> <a id="1384" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1386" href="Prelude.Show.html#315" class="Field">show</a> <a id="1391" href="Swap.Derive.html#1343" class="Bound">ps</a> <a id="1394" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1396" class="String">&quot;; cs = &quot;</a> <a id="1406" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1408" href="Prelude.Show.html#315" class="Field">show</a> <a id="1413" href="Swap.Derive.html#1346" class="Bound">cs</a> <a id="1416" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1418" class="String">&quot;}&quot;</a>
  <a id="1424" class="Comment">-- cs′ ← mapM mkClause $ drop 1 cs</a>
  <a id="1461" href="Swap.Derive.html#1461" class="Bound">cs′</a> <a id="1465" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="1467" href="Prelude.Monad.html#2348" class="Function">mapM</a> <a id="1472" href="Swap.Derive.html#1538" class="Function">mkClause</a> <a id="1481" href="Swap.Derive.html#1346" class="Bound">cs</a>
  <a id="1486" href="Prelude.Monad.html#475" class="Field">return</a> <a id="1493" href="Prelude.Generics.html#2058" class="InductiveConstructor Operator">`λ⟦</a> <a id="1497" class="String">&quot;𝕒&quot;</a> <a id="1501" href="Prelude.Generics.html#2058" class="InductiveConstructor Operator">∣</a> <a id="1503" class="String">&quot;𝕓&quot;</a> <a id="1507" href="Prelude.Generics.html#2058" class="InductiveConstructor Operator">⇒</a> <a id="1509" href="Agda.Builtin.Reflection.html#5013" class="InductiveConstructor">pat-lam</a> <a id="1517" href="Swap.Derive.html#1461" class="Bound">cs′</a> <a id="1521" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1524" href="Prelude.Generics.html#2058" class="InductiveConstructor Operator">⟧</a>
  <a id="1528" class="Keyword">where</a>
    <a id="1538" href="Swap.Derive.html#1538" class="Function">mkClause</a> <a id="1547" class="Symbol">:</a> <a id="1549" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a> <a id="1554" class="Symbol">→</a> <a id="1556" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="1559" href="Agda.Builtin.Reflection.html#4745" class="Datatype">Clause</a>
    <a id="1570" href="Swap.Derive.html#1538" class="Function">mkClause</a> <a id="1579" href="Swap.Derive.html#1579" class="Bound">cn</a> <a id="1582" class="Symbol">=</a> <a id="1584" class="Keyword">do</a>
      <a id="1593" href="Swap.Derive.html#1593" class="Bound">tel</a> <a id="1597" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="1599" href="Swap.Derive.html#449" class="Function">getPatTele</a> <a id="1610" href="Swap.Derive.html#1579" class="Bound">cn</a>
      <a id="1619" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1625" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1627" class="String">&quot;Making pattern clause for constructor: &quot;</a> <a id="1669" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1671" href="Prelude.Show.html#315" class="Field">show</a> <a id="1676" href="Swap.Derive.html#1579" class="Bound">cn</a> <a id="1679" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1681" class="String">&quot; &quot;</a> <a id="1685" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1687" href="Prelude.Show.html#315" class="Field">show</a> <a id="1692" href="Swap.Derive.html#1593" class="Bound">tel</a>
      <a id="1702" class="Keyword">let</a> <a id="1706" href="Swap.Derive.html#1706" class="Bound">N</a> <a id="1708" class="Symbol">=</a> <a id="1710" href="Data.List.Base.html#4864" class="Function">length</a> <a id="1717" href="Swap.Derive.html#1593" class="Bound">tel</a><a id="1720" class="Symbol">;</a> <a id="1722" href="Swap.Derive.html#1722" class="Bound">♯𝕒</a> <a id="1725" class="Symbol">=</a> <a id="1727" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="1729" class="Symbol">(</a><a id="1730" href="Swap.Derive.html#1706" class="Bound">N</a> <a id="1732" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1734" class="Number">1</a><a id="1735" class="Symbol">);</a> <a id="1738" href="Swap.Derive.html#1738" class="Bound">♯𝕓</a> <a id="1741" class="Symbol">=</a> <a id="1743" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="1745" href="Swap.Derive.html#1706" class="Bound">N</a>
      <a id="1753" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1759" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1761" class="String">&quot;  ♯𝕒: &quot;</a> <a id="1770" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1772" href="Prelude.Show.html#315" class="Field">show</a> <a id="1777" href="Swap.Derive.html#1722" class="Bound">♯𝕒</a>
      <a id="1786" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1792" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1794" class="String">&quot;  ♯𝕓: &quot;</a> <a id="1803" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1805" href="Prelude.Show.html#315" class="Field">show</a> <a id="1810" href="Swap.Derive.html#1738" class="Bound">♯𝕓</a>
      <a id="1819" class="Comment">-- let tel′ = map (map₂ $ fmap $ mapVars $ suc ∘ suc ∘ suc) tel</a>
      <a id="1889" class="Keyword">let</a> <a id="1893" href="Swap.Derive.html#1893" class="Bound">tel′</a> <a id="1898" class="Symbol">=</a> <a id="1900" href="Data.List.Base.html#1544" class="Function">map</a> <a id="1904" class="Symbol">(</a><a id="1905" href="Prelude.Bifunctor.html#960" class="Function">map₂</a> <a id="1910" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1912" href="Prelude.Functor.html#329" class="Function">fmap</a> <a id="1917" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1919" href="Function.Base.html#636" class="Function">const</a> <a id="1925" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">unknown</a><a id="1932" class="Symbol">)</a> <a id="1934" href="Swap.Derive.html#1593" class="Bound">tel</a>
      <a id="1944" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="1950" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1952" class="String">&quot;  tel′: &quot;</a> <a id="1963" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="1965" href="Prelude.Show.html#315" class="Field">show</a> <a id="1970" href="Swap.Derive.html#1893" class="Bound">tel′</a>
      <a id="1981" class="Keyword">let</a>
        <a id="1993" href="Swap.Derive.html#1993" class="Bound">tys</a> <a id="1997" class="Symbol">:</a> <a id="1999" href="Reflection.Argument.html#1484" class="Function">Args</a> <a id="2004" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a>
        <a id="2017" href="Swap.Derive.html#1993" class="Bound">tys</a> <a id="2021" class="Symbol">=</a> <a id="2023" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2027" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2033" href="Swap.Derive.html#1893" class="Bound">tel′</a>

        <a id="2047" href="Swap.Derive.html#2047" class="Bound">itys</a> <a id="2052" class="Symbol">=</a> <a id="2054" href="Prelude.Lists.html#2190" class="Function">enumerate</a> <a id="2064" href="Swap.Derive.html#1993" class="Bound">tys</a>

        <a id="2077" href="Swap.Derive.html#2077" class="Bound">cArgsᵖ</a> <a id="2084" class="Symbol">:</a> <a id="2086" href="Reflection.Argument.html#1484" class="Function">Args</a> <a id="2091" href="Agda.Builtin.Reflection.html#4726" class="Datatype">Pattern</a>
        <a id="2107" href="Swap.Derive.html#2077" class="Bound">cArgsᵖ</a> <a id="2114" class="Symbol">=</a> <a id="2116" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2120" class="Symbol">(λ</a> <a id="2123" class="Symbol">(</a><a id="2124" href="Swap.Derive.html#2124" class="Bound">i</a> <a id="2126" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2128" href="Swap.Derive.html#2128" class="Bound">at</a><a id="2130" class="Symbol">)</a> <a id="2132" class="Symbol">→</a> <a id="2134" href="Prelude.Functor.html#329" class="Function">fmap</a> <a id="2139" class="Symbol">(</a><a id="2140" href="Function.Base.html#636" class="Function">const</a> <a id="2146" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2148" href="Agda.Builtin.Reflection.html#5559" class="InductiveConstructor">var</a> <a id="2152" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2154" href="Prelude.ToN.html#102" class="Field">toℕ</a> <a id="2158" href="Swap.Derive.html#2124" class="Bound">i</a><a id="2159" class="Symbol">)</a> <a id="2161" href="Swap.Derive.html#2128" class="Bound">at</a><a id="2163" class="Symbol">)</a> <a id="2165" class="Symbol">(</a><a id="2166" href="Data.List.Base.html#9817" class="Function">L.reverse</a> <a id="2176" href="Swap.Derive.html#2047" class="Bound">itys</a><a id="2180" class="Symbol">)</a>

        <a id="2191" href="Swap.Derive.html#2191" class="Bound">cArgs</a> <a id="2197" class="Symbol">:</a> <a id="2199" href="Reflection.Argument.html#1484" class="Function">Args</a> <a id="2204" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a>
        <a id="2217" href="Swap.Derive.html#2191" class="Bound">cArgs</a> <a id="2223" class="Symbol">=</a> <a id="2225" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2229" class="Symbol">(λ</a> <a id="2232" class="Symbol">(</a><a id="2233" href="Swap.Derive.html#2233" class="Bound">i</a> <a id="2235" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2237" href="Swap.Derive.html#2237" class="Bound">at</a><a id="2239" class="Symbol">)</a> <a id="2241" class="Symbol">→</a> <a id="2243" href="Prelude.Functor.html#329" class="Function">fmap</a> <a id="2248" class="Symbol">(</a><a id="2249" href="Function.Base.html#636" class="Function">const</a> <a id="2255" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2257" class="Keyword">quote</a> <a id="2263" href="Swap.Base.html#189" class="Field">swap</a> <a id="2268" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∙⟦</a> <a id="2271" href="Swap.Derive.html#1722" class="Bound">♯𝕒</a> <a id="2274" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∣</a> <a id="2276" href="Swap.Derive.html#1738" class="Bound">♯𝕓</a> <a id="2279" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">∣</a> <a id="2281" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="2283" class="Symbol">(</a><a id="2284" href="Prelude.ToN.html#102" class="Field">toℕ</a> <a id="2288" href="Swap.Derive.html#2233" class="Bound">i</a><a id="2289" class="Symbol">)</a> <a id="2291" href="Prelude.Generics.html#2788" class="InductiveConstructor Operator">⟧</a><a id="2292" class="Symbol">)</a> <a id="2294" href="Swap.Derive.html#2237" class="Bound">at</a><a id="2296" class="Symbol">)</a> <a id="2298" class="Symbol">(</a><a id="2299" href="Data.List.Base.html#9817" class="Function">L.reverse</a> <a id="2309" href="Swap.Derive.html#2047" class="Bound">itys</a><a id="2313" class="Symbol">)</a>

      <a id="2322" href="Prelude.Monad.html#475" class="Field">return</a> <a id="2329" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2331" href="Agda.Builtin.Reflection.html#5758" class="InductiveConstructor">clause</a> <a id="2338" href="Swap.Derive.html#1893" class="Bound">tel′</a> <a id="2343" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="2345" href="Reflection.Argument.html#1209" class="InductiveConstructor">vArg</a> <a id="2350" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2352" href="Agda.Builtin.Reflection.html#5466" class="InductiveConstructor">con</a> <a id="2356" href="Swap.Derive.html#1579" class="Bound">cn</a> <a id="2359" href="Swap.Derive.html#2077" class="Bound">cArgsᵖ</a> <a id="2366" href="Data.List.Base.html#5025" class="Function Operator">]</a> <a id="2368" class="Symbol">(</a><a id="2369" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="2373" href="Swap.Derive.html#1579" class="Bound">cn</a> <a id="2376" href="Swap.Derive.html#2191" class="Bound">cArgs</a><a id="2381" class="Symbol">)</a>
<a id="2383" class="Symbol">...</a> <a id="2387" class="Symbol">|</a> <a id="2389" href="Agda.Builtin.Reflection.html#7204" class="InductiveConstructor">function</a> <a id="2398" href="Swap.Derive.html#2398" class="Bound">cs</a> <a id="2401" class="Symbol">=</a> <a id="2403" class="Keyword">do</a>
  <a id="2408" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="2414" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2416" class="String">&quot;FUNCTION {cs = &quot;</a> <a id="2434" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2436" href="Prelude.Show.html#315" class="Field">show</a> <a id="2441" href="Swap.Derive.html#2398" class="Bound">cs</a> <a id="2444" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2446" class="String">&quot;}&quot;</a>
  <a id="2452" href="Agda.Builtin.Reflection.html#5758" class="InductiveConstructor">clause</a> <a id="2459" href="Swap.Derive.html#2459" class="Bound">tel</a> <a id="2463" href="Swap.Derive.html#2463" class="Bound">ps</a> <a id="2466" href="Swap.Derive.html#2466" class="Bound">t</a> <a id="2468" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2470" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2473" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="2475" href="Prelude.Monad.html#475" class="Field">return</a> <a id="2482" href="Swap.Derive.html#2398" class="Bound">cs</a>
    <a id="2489" class="Keyword">where</a> <a id="2495" class="CatchallClause Symbol">_</a> <a id="2497" class="Symbol">→</a> <a id="2499" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="2505" class="String">&quot;[not supported] multi-clause function&quot;</a>
  <a id="2547" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="2553" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2555" class="String">&quot;  tel: &quot;</a> <a id="2565" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2567" href="Prelude.Show.html#315" class="Field">show</a> <a id="2572" href="Swap.Derive.html#2459" class="Bound">tel</a>
  <a id="2578" href="Swap.Derive.html#2578" class="Bound">ctx</a> <a id="2582" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="2584" href="Agda.Builtin.Reflection.html#8859" class="Postulate">getContext</a>
  <a id="2597" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="2603" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2605" class="String">&quot;  ctx: &quot;</a> <a id="2615" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2617" href="Prelude.Show.html#315" class="Field">show</a> <a id="2622" href="Swap.Derive.html#2578" class="Bound">ctx</a>
  <a id="2628" href="Agda.Builtin.Reflection.html#8965" class="Postulate">inContext</a> <a id="2638" class="Symbol">(</a><a id="2639" href="Data.List.Base.html#9817" class="Function">L.reverse</a> <a id="2649" class="Symbol">(</a><a id="2650" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2654" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2660" href="Swap.Derive.html#2459" class="Bound">tel</a><a id="2663" class="Symbol">)</a> <a id="2665" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="2668" href="Swap.Derive.html#2578" class="Bound">ctx</a><a id="2671" class="Symbol">)</a> <a id="2673" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2675" class="Keyword">do</a>
    <a id="2682" href="Swap.Derive.html#2682" class="Bound">t′</a><a id="2684" class="Symbol">@(</a><a id="2686" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="2690" href="Swap.Derive.html#2690" class="Bound">n</a> <a id="2692" href="Swap.Derive.html#2692" class="Bound">as</a><a id="2694" class="Symbol">)</a> <a id="2696" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="2698" href="Agda.Builtin.Reflection.html#8573" class="Postulate">normalise</a> <a id="2708" href="Swap.Derive.html#2466" class="Bound">t</a>
      <a id="2716" class="Keyword">where</a> <a id="2722" class="CatchallClause Symbol">_</a> <a id="2724" class="Symbol">→</a> <a id="2726" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="2732" class="String">&quot;[not supported] rhs does not refer to another definition&quot;</a>
    <a id="2795" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="2801" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2803" class="String">&quot;  t′: &quot;</a> <a id="2812" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2814" href="Prelude.Show.html#315" class="Field">show</a> <a id="2819" href="Swap.Derive.html#2682" class="Bound">t′</a>
    <a id="2826" href="Swap.Derive.html#2826" class="Bound">d</a> <a id="2828" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="2830" href="Agda.Builtin.Reflection.html#9245" class="Postulate">getDefinition</a> <a id="2844" href="Swap.Derive.html#2690" class="Bound">n</a>
    <a id="2850" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="2856" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2858" class="String">&quot;  d: &quot;</a> <a id="2866" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="2868" href="Prelude.Show.html#315" class="Field">show</a> <a id="2873" href="Swap.Derive.html#2826" class="Bound">d</a>
    <a id="2879" href="Swap.Derive.html#955" class="Function">derive↔</a> <a id="2887" href="Swap.Derive.html#2826" class="Bound">d</a>
<a id="2889" class="Symbol">...</a> <a id="2893" class="Symbol">|</a> <a id="2895" href="Agda.Builtin.Reflection.html#7374" class="InductiveConstructor">data-cons</a> <a id="2905" class="Symbol">_</a> <a id="2907" class="Symbol">=</a> <a id="2909" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="2915" class="String">&quot;[not supported] data constructors&quot;</a>
<a id="2951" class="Symbol">...</a> <a id="2955" class="Symbol">|</a> <a id="2957" href="Agda.Builtin.Reflection.html#7414" class="InductiveConstructor">axiom</a>       <a id="2969" class="Symbol">=</a> <a id="2971" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="2977" class="String">&quot;[not supported] axioms&quot;</a>
<a id="3002" class="Symbol">...</a> <a id="3006" class="Symbol">|</a> <a id="3008" href="Agda.Builtin.Reflection.html#7441" class="InductiveConstructor">prim-fun</a>    <a id="3020" class="Symbol">=</a> <a id="3022" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="3028" class="String">&quot;[not supported] primitive functions&quot;</a>


<a id="dropFront"></a><a id="3068" href="Swap.Derive.html#3068" class="Function">dropFront</a> <a id="3078" class="Symbol">:</a> <a id="3080" class="Symbol">⦃</a> <a id="3082" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="3088" href="Swap.Base.html#132" class="Generalizable">A</a> <a id="3090" class="Symbol">⦄</a> <a id="3092" class="Symbol">→</a> <a id="3094" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3099" href="Swap.Base.html#132" class="Generalizable">A</a> <a id="3101" class="Symbol">→</a> <a id="3103" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3108" href="Swap.Base.html#132" class="Generalizable">A</a> <a id="3110" class="Symbol">→</a> <a id="3112" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3117" href="Swap.Base.html#132" class="Generalizable">A</a>
<a id="3119" href="Swap.Derive.html#3068" class="Function">dropFront</a> <a id="3129" href="Swap.Derive.html#3129" class="Bound">xs</a> <a id="3132" href="Swap.Derive.html#3132" class="Bound">ys</a> <a id="3135" class="Symbol">=</a>
  <a id="3139" class="Keyword">let</a> <a id="3143" href="Swap.Derive.html#3143" class="Bound">ysˡ</a> <a id="3147" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3149" href="Swap.Derive.html#3149" class="Bound">ysʳ</a> <a id="3153" class="Symbol">=</a> <a id="3155" href="Data.List.Base.html#7543" class="Function">L.splitAt</a> <a id="3165" class="Symbol">(</a><a id="3166" href="Data.List.Base.html#4864" class="Function">length</a> <a id="3173" href="Swap.Derive.html#3129" class="Bound">xs</a><a id="3175" class="Symbol">)</a> <a id="3177" href="Swap.Derive.html#3132" class="Bound">ys</a>
  <a id="3182" class="Keyword">in</a> <a id="3185" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="3188" href="Swap.Derive.html#3143" class="Bound">ysˡ</a> <a id="3192" href="Prelude.DecEq.Core.html#173" class="Function Operator">==</a> <a id="3195" href="Swap.Derive.html#3129" class="Bound">xs</a> <a id="3198" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="3203" href="Swap.Derive.html#3149" class="Bound">ysʳ</a>
    <a id="3211" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="3216" href="Swap.Derive.html#3132" class="Bound">ys</a>

<a id="∀instances⋯"></a><a id="3220" href="Swap.Derive.html#3220" class="Function">∀instances⋯</a> <a id="3232" class="Symbol">:</a> <a id="3234" class="Symbol">(</a><a id="3235" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a> <a id="3240" class="Symbol">→</a> <a id="3242" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a><a id="3246" class="Symbol">)</a> <a id="3248" class="Symbol">→</a> <a id="3250" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3255" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a> <a id="3260" class="Symbol">→</a> <a id="3262" class="Symbol">(</a><a id="3263" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a> <a id="3268" class="Symbol">→</a> <a id="3270" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a><a id="3274" class="Symbol">)</a>
<a id="3276" href="Swap.Derive.html#3220" class="Function">∀instances⋯</a> <a id="3288" class="Symbol">_</a> <a id="3290" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="3299" href="Swap.Derive.html#3299" class="Bound">ty</a> <a id="3302" class="Symbol">=</a> <a id="3304" href="Swap.Derive.html#3299" class="Bound">ty</a>
<a id="3307" href="Swap.Derive.html#3220" class="Function">∀instances⋯</a> <a id="3319" href="Swap.Derive.html#3319" class="Bound">F</a> <a id="3321" class="Symbol">(</a><a id="3322" href="Swap.Derive.html#3322" class="Bound">i</a> <a id="3324" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3326" href="Swap.Derive.html#3326" class="Bound">is</a><a id="3328" class="Symbol">)</a> <a id="3330" href="Swap.Derive.html#3330" class="Bound">ty</a> <a id="3333" class="Symbol">=</a> <a id="3335" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">iΠ[</a> <a id="3339" class="String">&quot;_&quot;</a> <a id="3343" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">∶</a> <a id="3345" href="Swap.Derive.html#3319" class="Bound">F</a> <a id="3347" href="Swap.Derive.html#3322" class="Bound">i</a> <a id="3349" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">]</a> <a id="3351" class="Symbol">(</a><a id="3352" href="Swap.Derive.html#3220" class="Function">∀instances⋯</a> <a id="3364" href="Swap.Derive.html#3319" class="Bound">F</a> <a id="3366" href="Swap.Derive.html#3326" class="Bound">is</a> <a id="3369" href="Swap.Derive.html#3330" class="Bound">ty</a><a id="3371" class="Symbol">)</a>

<a id="3374" class="Keyword">pattern</a> <a id="agda-lit"></a><a id="3382" href="Swap.Derive.html#3382" class="InductiveConstructor">agda-lit</a> <a id="3391" href="Swap.Derive.html#3410" class="Bound">n</a> <a id="3393" class="Symbol">=</a> <a id="3395" href="Reflection.Term.html#1396" class="InductiveConstructor">agda-sort</a> <a id="3405" class="Symbol">(</a><a id="3406" class="InductiveConstructor">lit</a> <a id="3410" href="Swap.Derive.html#3410" class="Bound">n</a><a id="3411" class="Symbol">)</a>
<a id="3413" class="Keyword">pattern</a> <a id="agda-set"></a><a id="3421" href="Swap.Derive.html#3421" class="InductiveConstructor">agda-set</a> <a id="3430" href="Swap.Derive.html#3449" class="Bound">n</a> <a id="3432" class="Symbol">=</a> <a id="3434" href="Reflection.Term.html#1396" class="InductiveConstructor">agda-sort</a> <a id="3444" class="Symbol">(</a><a id="3445" href="Agda.Builtin.Reflection.html#5282" class="InductiveConstructor">set</a> <a id="3449" href="Swap.Derive.html#3449" class="Bound">n</a><a id="3450" class="Symbol">)</a>

<a id="addHypotheses"></a><a id="3453" href="Swap.Derive.html#3453" class="Function">addHypotheses</a> <a id="3467" class="Symbol">:</a> <a id="3469" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a> <a id="3474" class="Symbol">→</a> <a id="3476" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="3479" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a>
<a id="3484" href="Swap.Derive.html#3453" class="Function">addHypotheses</a> <a id="3498" class="Symbol">=</a> <a id="3500" class="Symbol">λ</a> <a id="3502" class="Keyword">where</a>
  <a id="3510" class="Symbol">(</a><a id="3511" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">Π[</a> <a id="3514" href="Swap.Derive.html#3514" class="Bound">s</a> <a id="3516" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">∶</a> <a id="3518" href="Swap.Derive.html#3518" class="Bound">a</a> <a id="3520" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">]</a> <a id="3522" href="Swap.Derive.html#3522" class="Bound">ty</a><a id="3524" class="Symbol">)</a> <a id="3526" class="Symbol">→</a> <a id="3528" class="Keyword">do</a>
    <a id="3535" href="Swap.Derive.html#3535" class="Bound">ty′</a> <a id="3539" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="3541" href="Swap.Derive.html#3453" class="Function">addHypotheses</a> <a id="3555" href="Swap.Derive.html#3522" class="Bound">ty</a>
    <a id="3562" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3568" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3570" href="Prelude.Show.html#315" class="Field">show</a> <a id="3575" href="Swap.Derive.html#3522" class="Bound">ty</a>
    <a id="3582" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3588" class="String">&quot; ∼↝ &quot;</a>
    <a id="3599" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3605" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3607" href="Prelude.Show.html#315" class="Field">show</a> <a id="3612" href="Swap.Derive.html#3535" class="Bound">ty′</a>
    <a id="3620" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="3625" href="Reflection.Argument.html#2521" class="Function">unArg</a> <a id="3631" href="Swap.Derive.html#3518" class="Bound">a</a> <a id="3633" href="Function.Base.html#4121" class="Function Operator">of</a> <a id="3636" class="Symbol">λ</a> <a id="3638" class="Keyword">where</a>
      <a id="3650" class="Symbol">(</a><a id="3651" href="Reflection.Term.html#1396" class="InductiveConstructor">agda-sort</a> <a id="3661" class="Symbol">(</a><a id="3662" href="Agda.Builtin.Reflection.html#5312" class="InductiveConstructor">lit</a> <a id="3666" class="Symbol">_))</a> <a id="3670" class="Symbol">→</a> <a id="3672" class="Keyword">do</a>
        <a id="3683" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3689" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3691" href="Prelude.Show.html#315" class="Field">show</a> <a id="3696" href="Swap.Derive.html#3535" class="Bound">ty′</a>
        <a id="3708" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3714" class="String">&quot; ∼∼↝ &quot;</a>
        <a id="3730" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3736" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3738" href="Prelude.Show.html#315" class="Field">show</a> <a id="3743" class="Symbol">(</a><a id="3744" href="Prelude.Generics.html#6875" class="Function">mapVars</a> <a id="3752" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="3756" href="Swap.Derive.html#3535" class="Bound">ty′</a><a id="3759" class="Symbol">)</a>
        <a id="3769" href="Prelude.Monad.html#475" class="Field">return</a> <a id="3776" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3778" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">Π[</a> <a id="3781" href="Swap.Derive.html#3514" class="Bound">s</a> <a id="3783" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">∶</a> <a id="3785" href="Swap.Derive.html#3518" class="Bound">a</a> <a id="3787" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">]</a> <a id="3789" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">iΠ[</a> <a id="3793" class="String">&quot;_&quot;</a> <a id="3797" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">∶</a> <a id="3799" class="Keyword">quote</a> <a id="3805" href="Swap.Base.html#150" class="Record">Swap</a> <a id="3810" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">∙⟦</a> <a id="3813" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="3815" class="Number">0</a> <a id="3817" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">⟧</a> <a id="3819" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">]</a> <a id="3821" href="Prelude.Generics.html#6875" class="Function">mapVars</a> <a id="3829" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="3833" href="Swap.Derive.html#3535" class="Bound">ty′</a>
      <a id="3843" class="Symbol">(</a><a id="3844" href="Reflection.Term.html#1396" class="InductiveConstructor">agda-sort</a> <a id="3854" class="Symbol">(</a><a id="3855" href="Agda.Builtin.Reflection.html#5282" class="InductiveConstructor">set</a> <a id="3859" class="Symbol">_))</a> <a id="3863" class="Symbol">→</a> <a id="3865" class="Keyword">do</a>
        <a id="3876" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3882" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3884" href="Prelude.Show.html#315" class="Field">show</a> <a id="3889" href="Swap.Derive.html#3535" class="Bound">ty′</a>
        <a id="3901" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3907" class="String">&quot; ∼∼↝ &quot;</a>
        <a id="3923" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="3929" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3931" href="Prelude.Show.html#315" class="Field">show</a> <a id="3936" class="Symbol">(</a><a id="3937" href="Prelude.Generics.html#6875" class="Function">mapVars</a> <a id="3945" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="3949" href="Swap.Derive.html#3535" class="Bound">ty′</a><a id="3952" class="Symbol">)</a>
        <a id="3962" href="Prelude.Monad.html#475" class="Field">return</a> <a id="3969" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3971" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">Π[</a> <a id="3974" href="Swap.Derive.html#3514" class="Bound">s</a> <a id="3976" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">∶</a> <a id="3978" href="Swap.Derive.html#3518" class="Bound">a</a> <a id="3980" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">]</a> <a id="3982" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">iΠ[</a> <a id="3986" class="String">&quot;_&quot;</a> <a id="3990" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">∶</a> <a id="3992" class="Keyword">quote</a> <a id="3998" href="Swap.Base.html#150" class="Record">Swap</a> <a id="4003" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">∙⟦</a> <a id="4006" href="Prelude.Generics.html#811" class="InductiveConstructor">♯</a> <a id="4008" class="Number">0</a> <a id="4010" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">⟧</a> <a id="4012" href="Reflection.Term.html#1988" class="InductiveConstructor Operator">]</a> <a id="4014" href="Prelude.Generics.html#6875" class="Function">mapVars</a> <a id="4022" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4026" href="Swap.Derive.html#3535" class="Bound">ty′</a>
      <a id="4036" class="CatchallClause Symbol">_</a> <a id="4038" class="Symbol">→</a> <a id="4040" class="Keyword">do</a> <a id="4043" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4049" class="String">&quot;non-set&quot;</a>
             <a id="4072" href="Prelude.Monad.html#475" class="Field">return</a> <a id="4079" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4081" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">Π[</a> <a id="4084" href="Swap.Derive.html#3514" class="Bound">s</a> <a id="4086" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">∶</a> <a id="4088" href="Swap.Derive.html#3518" class="Bound">a</a> <a id="4090" href="Reflection.Term.html#1843" class="InductiveConstructor Operator">]</a> <a id="4092" href="Swap.Derive.html#3535" class="Bound">ty′</a>
  <a id="4098" href="Swap.Derive.html#4098" class="CatchallClause Bound">t</a> <a id="4100" class="Symbol">→</a> <a id="4102" href="Prelude.Monad.html#475" class="Field">return</a> <a id="4109" href="Swap.Derive.html#4098" class="Bound">t</a>

<a id="4112" class="Keyword">instance</a>
  <a id="Derivable↔"></a><a id="4123" href="Swap.Derive.html#4123" class="Function">Derivable↔</a> <a id="4134" class="Symbol">:</a> <a id="4136" href="Prelude.Generics.html#9383" class="Record">Derivable</a> <a id="4146" href="Swap.Base.html#150" class="Record">Swap</a>
  <a id="4153" href="Swap.Derive.html#4123" class="Function">Derivable↔</a> <a id="4164" class="Symbol">.</a><a id="4165" href="Prelude.Generics.html#9424" class="Field">DERIVE&#39;</a> <a id="4173" href="Swap.Derive.html#4173" class="Bound">args</a> <a id="4178" class="Symbol">=</a> <a id="4180" class="Keyword">do</a>
    <a id="4187" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4193" class="String">&quot;********************************************************&quot;</a>
    <a id="4256" class="Symbol">(</a><a id="4257" href="Agda.Builtin.Reflection.html#7311" class="InductiveConstructor">record-type</a> <a id="4269" href="Swap.Derive.html#4269" class="Bound">`swap</a> <a id="4275" class="Symbol">_)</a> <a id="4278" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="4280" href="Agda.Builtin.Reflection.html#9245" class="Postulate">getDefinition</a> <a id="4294" class="Symbol">(</a><a id="4295" class="Keyword">quote</a> <a id="4301" href="Swap.Base.html#150" class="Record">Swap</a><a id="4305" class="Symbol">)</a>
      <a id="4313" class="Keyword">where</a> <a id="4319" class="CatchallClause Symbol">_</a> <a id="4321" class="Symbol">→</a> <a id="4323" href="Prelude.Generics.html#9686" class="Function Operator">_IMPOSSIBLE_</a>
    <a id="4340" class="Symbol">((</a><a id="4342" href="Swap.Derive.html#4342" class="Bound">n</a> <a id="4344" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4346" href="Swap.Derive.html#4346" class="Bound">f</a><a id="4347" class="Symbol">)</a> <a id="4349" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4351" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="4353" class="Symbol">)</a> <a id="4355" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="4357" href="Prelude.Monad.html#475" class="Field">return</a> <a id="4364" href="Swap.Derive.html#4173" class="Bound">args</a>
      <a id="4375" class="Keyword">where</a> <a id="4381" class="CatchallClause Symbol">_</a> <a id="4383" class="Symbol">→</a> <a id="4385" href="Prelude.Generics.html#9630" class="Function">error</a> <a id="4391" class="String">&quot;not supported: mutual types&quot;</a>
    <a id="4425" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4431" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4433" class="String">&quot;Deriving &quot;</a> <a id="4445" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4447" href="Data.String.Base.html#2826" class="Function">parens</a> <a id="4454" class="Symbol">(</a><a id="4455" href="Prelude.Show.html#315" class="Field">show</a> <a id="4460" href="Swap.Derive.html#4346" class="Bound">f</a> <a id="4462" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4464" class="String">&quot; : Swap &quot;</a> <a id="4475" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4477" href="Prelude.Show.html#315" class="Field">show</a> <a id="4482" href="Swap.Derive.html#4342" class="Bound">n</a><a id="4483" class="Symbol">)</a>
    <a id="4489" href="Swap.Derive.html#4489" class="Bound">T</a> <a id="4491" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="4493" href="Agda.Builtin.Reflection.html#9209" class="Postulate">getType</a> <a id="4501" href="Swap.Derive.html#4342" class="Bound">n</a>
    <a id="4507" href="Swap.Derive.html#4507" class="Bound">ctx</a> <a id="4511" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="4513" href="Agda.Builtin.Reflection.html#8859" class="Postulate">getContext</a>
    <a id="4528" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4534" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4536" class="String">&quot;  Context: &quot;</a> <a id="4550" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4552" href="Prelude.Show.html#315" class="Field">show</a> <a id="4557" href="Swap.Derive.html#4507" class="Bound">ctx</a>
    <a id="4565" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4571" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4573" class="String">&quot;  Type: &quot;</a> <a id="4584" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4586" href="Prelude.Show.html#315" class="Field">show</a> <a id="4591" href="Swap.Derive.html#4489" class="Bound">T</a>
    <a id="4597" href="Swap.Derive.html#4597" class="Bound">d</a> <a id="4599" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="4601" href="Agda.Builtin.Reflection.html#9245" class="Postulate">getDefinition</a> <a id="4615" href="Swap.Derive.html#4342" class="Bound">n</a>
    <a id="4621" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4627" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4629" class="String">&quot;  Definition: &quot;</a> <a id="4646" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4648" href="Prelude.Show.html#315" class="Field">show</a> <a id="4653" href="Swap.Derive.html#4597" class="Bound">d</a>
    <a id="4659" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4665" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4667" class="String">&quot;  argTys: &quot;</a> <a id="4680" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4682" href="Prelude.Show.html#315" class="Field">show</a> <a id="4687" class="Symbol">(</a><a id="4688" href="Prelude.Generics.html#4237" class="Function">argTys</a> <a id="4695" href="Swap.Derive.html#4489" class="Bound">T</a><a id="4696" class="Symbol">)</a>
    <a id="4702" class="Keyword">let</a> <a id="4706" href="Swap.Derive.html#4706" class="Bound">toDrop</a> <a id="4713" class="Symbol">=</a> <a id="4715" href="Data.List.Base.html#4864" class="Function">length</a> <a id="4722" href="Swap.Derive.html#4507" class="Bound">ctx</a>
    <a id="4730" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4736" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4738" class="String">&quot;  toDrop: &quot;</a> <a id="4751" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4753" href="Prelude.Show.html#315" class="Field">show</a> <a id="4758" href="Swap.Derive.html#4706" class="Bound">toDrop</a>

    <a id="4770" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4776" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4778" class="String">&quot;  Parameters: &quot;</a> <a id="4795" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4797" href="Prelude.Show.html#315" class="Field">show</a> <a id="4802" class="Symbol">(</a><a id="4803" href="Prelude.Generics.html#7673" class="Function">parameters</a> <a id="4814" href="Swap.Derive.html#4597" class="Bound">d</a><a id="4815" class="Symbol">)</a>
    <a id="4821" class="Keyword">let</a> <a id="4825" href="Swap.Derive.html#4825" class="Bound">is</a> <a id="4828" class="Symbol">=</a> <a id="4830" href="Swap.Derive.html#3068" class="Function">dropFront</a> <a id="4840" class="Symbol">(</a><a id="4841" href="Data.List.Base.html#9817" class="Function">L.reverse</a> <a id="4851" href="Swap.Derive.html#4507" class="Bound">ctx</a><a id="4854" class="Symbol">)</a> <a id="4856" class="Symbol">(</a><a id="4857" href="Prelude.Generics.html#4237" class="Function">argTys</a> <a id="4864" href="Swap.Derive.html#4489" class="Bound">T</a><a id="4865" class="Symbol">)</a>
    <a id="4871" class="Comment">-- let is = drop toDrop (argTys T)</a>
    <a id="4910" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4916" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4918" class="String">&quot;  Indices: &quot;</a> <a id="4932" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4934" href="Prelude.Show.html#315" class="Field">show</a> <a id="4939" href="Swap.Derive.html#4825" class="Bound">is</a>
    <a id="4946" class="Keyword">let</a> <a id="4950" href="Swap.Derive.html#4950" class="Bound">n′</a> <a id="4953" class="Symbol">=</a> <a id="4955" href="Prelude.Generics.html#8663" class="Function">apply⋯</a> <a id="4962" href="Swap.Derive.html#4825" class="Bound">is</a> <a id="4965" href="Swap.Derive.html#4342" class="Bound">n</a>
    <a id="4971" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="4977" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="4979" class="String">&quot;  n′: &quot;</a> <a id="4988" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="4990" href="Prelude.Show.html#315" class="Field">show</a> <a id="4995" href="Swap.Derive.html#4950" class="Bound">n′</a>
    <a id="5002" href="Swap.Derive.html#5002" class="Bound">T′</a> <a id="5005" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="5007" href="Swap.Derive.html#3453" class="Function">addHypotheses</a>
           <a id="5032" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5034" href="Prelude.Generics.html#8539" class="Function">∀indices⋯</a> <a id="5044" href="Swap.Derive.html#4825" class="Bound">is</a>
           <a id="5058" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5060" class="Keyword">quote</a> <a id="5066" href="Swap.Base.html#150" class="Record">Swap</a> <a id="5071" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">∙⟦</a> <a id="5074" href="Swap.Derive.html#4950" class="Bound">n′</a> <a id="5077" href="Prelude.Generics.html#2695" class="InductiveConstructor Operator">⟧</a>
    <a id="5083" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="5089" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5091" class="String">&quot;  T′: &quot;</a> <a id="5100" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="5102" href="Prelude.Show.html#315" class="Field">show</a> <a id="5107" href="Swap.Derive.html#5002" class="Bound">T′</a>
    <a id="5114" href="Agda.Builtin.Reflection.html#9074" class="Postulate">declareDef</a> <a id="5125" class="Symbol">(</a><a id="5126" href="Reflection.Argument.html#1333" class="InductiveConstructor">iArg</a> <a id="5131" href="Swap.Derive.html#4346" class="Bound">f</a><a id="5132" class="Symbol">)</a> <a id="5134" href="Swap.Derive.html#5002" class="Bound">T′</a>

    <a id="5142" class="Keyword">let</a> <a id="5146" href="Swap.Derive.html#5146" class="Bound">mctx</a> <a id="5151" class="Symbol">=</a> <a id="5153" href="Prelude.Generics.html#4237" class="Function">argTys</a> <a id="5160" href="Swap.Derive.html#5002" class="Bound">T′</a>
        <a id="5171" href="Swap.Derive.html#5171" class="Bound">mtel</a> <a id="5176" class="Symbol">=</a> <a id="5178" href="Data.List.Base.html#1544" class="Function">map</a> <a id="5182" class="Symbol">(</a><a id="5183" class="String">&quot;_&quot;</a> <a id="5187" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="5189" class="Symbol">)</a> <a id="5191" href="Swap.Derive.html#5146" class="Bound">mctx</a>
        <a id="5204" href="Swap.Derive.html#5204" class="Bound">pc</a>   <a id="5209" class="Symbol">=</a> <a id="5211" href="Data.List.Base.html#1544" class="Function">map</a> <a id="5215" class="Symbol">(λ</a> <a id="5218" class="Keyword">where</a> <a id="5224" class="Symbol">(</a><a id="5225" href="Swap.Derive.html#5225" class="Bound">i</a> <a id="5227" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5229" href="Swap.Derive.html#5229" class="Bound">a</a><a id="5230" class="Symbol">)</a> <a id="5232" class="Symbol">→</a> <a id="5234" href="Prelude.Functor.html#329" class="Function">fmap</a> <a id="5239" class="Symbol">(</a><a id="5240" href="Function.Base.html#636" class="Function">const</a> <a id="5246" class="Symbol">(</a><a id="5247" href="Prelude.Generics.html#940" class="InductiveConstructor Operator">`</a> <a id="5249" class="Symbol">(</a><a id="5250" href="Data.List.Base.html#4864" class="Function">length</a> <a id="5257" href="Swap.Derive.html#5146" class="Bound">mctx</a> <a id="5262" href="Data.Nat.Base.html#2874" class="Primitive Operator">∸</a> <a id="5264" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="5268" class="Symbol">(</a><a id="5269" href="Prelude.ToN.html#102" class="Field">toℕ</a> <a id="5273" href="Swap.Derive.html#5225" class="Bound">i</a><a id="5274" class="Symbol">))))</a> <a id="5279" href="Swap.Derive.html#5229" class="Bound">a</a><a id="5280" class="Symbol">)</a> <a id="5282" class="Symbol">(</a><a id="5283" href="Prelude.Lists.html#2190" class="Function">enumerate</a> <a id="5293" href="Swap.Derive.html#5146" class="Bound">mctx</a><a id="5297" class="Symbol">)</a>
    <a id="5303" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="5309" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5311" class="String">&quot;  mctx: &quot;</a> <a id="5322" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="5324" href="Prelude.Show.html#315" class="Field">show</a> <a id="5329" href="Swap.Derive.html#5146" class="Bound">mctx</a>
    <a id="5338" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="5344" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5346" class="String">&quot;  mtel: &quot;</a> <a id="5357" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="5359" href="Prelude.Show.html#315" class="Field">show</a> <a id="5364" href="Swap.Derive.html#5171" class="Bound">mtel</a>
    <a id="5373" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="5379" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5381" class="String">&quot;  pc: &quot;</a> <a id="5390" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="5392" href="Prelude.Show.html#315" class="Field">show</a> <a id="5397" href="Swap.Derive.html#5204" class="Bound">pc</a>

    <a id="5405" href="Swap.Derive.html#5405" class="Bound">t</a> <a id="5407" href="Prelude.Monad.html#496" class="Field Operator">←</a> <a id="5409" href="Swap.Derive.html#955" class="Function">derive↔</a> <a id="5417" href="Swap.Derive.html#4597" class="Bound">d</a>
    <a id="5423" class="Comment">-- t ← inContext (L.reverse mctx ++ ctx) $ do</a>
    <a id="5473" class="Comment">--   ctx ← getContext</a>
    <a id="5499" class="Comment">--   print $ &quot;  Context′: &quot; ◇ show ctx</a>
    <a id="5542" class="Comment">--   derive↔ (n , f) d</a>
    <a id="5569" href="Prelude.Generics.html#9868" class="Function">print</a> <a id="5575" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="5577" class="String">&quot;t: &quot;</a> <a id="5583" href="Prelude.Semigroup.html#134" class="Field Operator">◇</a> <a id="5585" href="Prelude.Show.html#315" class="Field">show</a> <a id="5590" href="Swap.Derive.html#5405" class="Bound">t</a>
    <a id="5596" href="Agda.Builtin.Reflection.html#9162" class="Postulate">defineFun</a> <a id="5606" href="Swap.Derive.html#4346" class="Bound">f</a> <a id="5608" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="5610" href="Agda.Builtin.Reflection.html#5758" class="InductiveConstructor">clause</a> <a id="5617" href="Swap.Derive.html#5171" class="Bound">mtel</a> <a id="5622" href="Swap.Derive.html#5204" class="Bound">pc</a> <a id="5625" class="Symbol">(</a><a id="5626" href="Swap.Derive.html#4269" class="Bound">`swap</a> <a id="5632" href="Prelude.Generics.html#2879" class="InductiveConstructor Operator">◆⟦</a> <a id="5635" href="Swap.Derive.html#5405" class="Bound">t</a> <a id="5637" href="Prelude.Generics.html#2879" class="InductiveConstructor Operator">⟧</a><a id="5638" class="Symbol">)</a> <a id="5640" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="5643" class="Comment">-- instance</a>
<a id="5655" class="Comment">--   Σ↔ : ∀ {a b : Level} {A : Set a} {B : A → Set b}</a>
<a id="5709" class="Comment">--     → ⦃ Swap A ⦄</a>
<a id="5729" class="Comment">--     → ⦃ ∀ {a : A} → Swap (B a) ⦄</a>
<a id="5765" class="Comment">--     → Swap (Σ A B)</a>
<a id="5787" class="Comment">--   Σ↔ ⦃ sw₁ ⦄ ⦃ sw₂ ⦄ .swap 𝕒 𝕓 (a , Ba) = swap 𝕒 𝕓 a , {!swap ⦃ sw₂ {a = swap 𝕒 𝕓 a} ⦄ 𝕒 𝕓 Ba!}</a>
<a id="5886" class="Comment">-- unquoteDecl Σ↔ = DERIVE Swap [ quote Σ , Σ↔ ]</a>

<a id="5936" class="Comment">-- instance</a>
<a id="5948" class="Comment">--   ×↔ : ∀ {a b : Level} {A : Set a} {B : Set b}</a>
<a id="5998" class="Comment">--     → ⦃ Swap A ⦄</a>
<a id="6018" class="Comment">--     → ⦃ Swap B ⦄</a>
<a id="6038" class="Comment">--     → Swap (A × B)</a>
<a id="6060" class="Comment">--   ×↔ .swap = λ 𝕒 𝕓 → λ where</a>
<a id="6092" class="Comment">--     (a , b) → swap 𝕒 𝕓 a , swap 𝕒 𝕓 b</a>
<a id="6133" class="Keyword">unquoteDecl</a> <a id="×↔"></a><a id="6145" href="Swap.Derive.html#6145" class="Function">×↔</a> <a id="6148" class="Symbol">=</a> <a id="6150" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="6157" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6162" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="6164" class="Keyword">quote</a> <a id="6170" href="Data.Product.html#1167" class="Function Operator">_×_</a> <a id="6174" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6176" href="Swap.Derive.html#6145" class="Function">×↔</a> <a id="6179" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="6182" class="Keyword">data</a> <a id="PAIR"></a><a id="6187" href="Swap.Derive.html#6187" class="Datatype">PAIR</a> <a id="6192" class="Symbol">(</a><a id="6193" href="Swap.Derive.html#6193" class="Bound">A</a> <a id="6195" href="Swap.Derive.html#6195" class="Bound">B</a> <a id="6197" class="Symbol">:</a> <a id="6199" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6202" class="Symbol">)</a> <a id="6204" class="Symbol">:</a> <a id="6206" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6210" class="Keyword">where</a>
  <a id="PAIR.⦅_,_⦆"></a><a id="6218" href="Swap.Derive.html#6218" class="InductiveConstructor Operator">⦅_,_⦆</a> <a id="6224" class="Symbol">:</a> <a id="6226" href="Swap.Derive.html#6193" class="Bound">A</a> <a id="6228" class="Symbol">→</a> <a id="6230" href="Swap.Derive.html#6195" class="Bound">B</a> <a id="6232" class="Symbol">→</a> <a id="6234" href="Swap.Derive.html#6187" class="Datatype">PAIR</a> <a id="6239" href="Swap.Derive.html#6193" class="Bound">A</a> <a id="6241" href="Swap.Derive.html#6195" class="Bound">B</a>
<a id="6243" class="Keyword">unquoteDecl</a> <a id="PAIR↔"></a><a id="6255" href="Swap.Derive.html#6255" class="Function">PAIR↔</a> <a id="6261" class="Symbol">=</a> <a id="6263" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="6270" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6275" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="6277" class="Keyword">quote</a> <a id="6283" href="Swap.Derive.html#6187" class="Datatype">PAIR</a> <a id="6288" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6290" href="Swap.Derive.html#6255" class="Function">PAIR↔</a> <a id="6296" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="6299" class="Keyword">data</a> <a id="HPAIR"></a><a id="6304" href="Swap.Derive.html#6304" class="Datatype">HPAIR</a> <a id="6310" class="Symbol">{</a><a id="6311" href="Swap.Derive.html#6311" class="Bound">a</a> <a id="6313" href="Swap.Derive.html#6313" class="Bound">b</a> <a id="6315" class="Symbol">:</a> <a id="6317" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="6322" class="Symbol">}</a> <a id="6324" class="Symbol">(</a><a id="6325" href="Swap.Derive.html#6325" class="Bound">A</a> <a id="6327" class="Symbol">:</a> <a id="6329" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6333" href="Swap.Derive.html#6311" class="Bound">a</a><a id="6334" class="Symbol">)</a> <a id="6336" class="Symbol">(</a><a id="6337" href="Swap.Derive.html#6337" class="Bound">B</a> <a id="6339" class="Symbol">:</a> <a id="6341" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6345" href="Swap.Derive.html#6313" class="Bound">b</a><a id="6346" class="Symbol">)</a> <a id="6348" class="Symbol">:</a> <a id="6350" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6354" class="Symbol">(</a><a id="6355" href="Swap.Derive.html#6311" class="Bound">a</a> <a id="6357" href="Agda.Primitive.html#810" class="Primitive Operator">⊔ₗ</a> <a id="6360" href="Swap.Derive.html#6313" class="Bound">b</a><a id="6361" class="Symbol">)</a> <a id="6363" class="Keyword">where</a>
  <a id="HPAIR.⦅_,_⦆"></a><a id="6371" href="Swap.Derive.html#6371" class="InductiveConstructor Operator">⦅_,_⦆</a> <a id="6377" class="Symbol">:</a> <a id="6379" href="Swap.Derive.html#6325" class="Bound">A</a> <a id="6381" class="Symbol">→</a> <a id="6383" href="Swap.Derive.html#6337" class="Bound">B</a> <a id="6385" class="Symbol">→</a> <a id="6387" href="Swap.Derive.html#6304" class="Datatype">HPAIR</a> <a id="6393" href="Swap.Derive.html#6325" class="Bound">A</a> <a id="6395" href="Swap.Derive.html#6337" class="Bound">B</a>
<a id="6397" class="Keyword">unquoteDecl</a> <a id="HPAIR↔"></a><a id="6409" href="Swap.Derive.html#6409" class="Function">HPAIR↔</a> <a id="6416" class="Symbol">=</a> <a id="6418" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="6425" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6430" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="6432" class="Keyword">quote</a> <a id="6438" href="Swap.Derive.html#6304" class="Datatype">HPAIR</a> <a id="6444" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6446" href="Swap.Derive.html#6409" class="Function">HPAIR↔</a> <a id="6453" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="6456" class="Keyword">data</a> <a id="LIST"></a><a id="6461" href="Swap.Derive.html#6461" class="Datatype">LIST</a> <a id="6466" class="Symbol">(</a><a id="6467" href="Swap.Derive.html#6467" class="Bound">A</a> <a id="6469" class="Symbol">:</a> <a id="6471" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6474" class="Symbol">)</a> <a id="6476" class="Symbol">:</a> <a id="6478" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6482" class="Keyword">where</a>
  <a id="LIST.∅"></a><a id="6490" href="Swap.Derive.html#6490" class="InductiveConstructor">∅</a> <a id="6492" class="Symbol">:</a> <a id="6494" href="Swap.Derive.html#6461" class="Datatype">LIST</a> <a id="6499" href="Swap.Derive.html#6467" class="Bound">A</a>
  <a id="LIST._∺_"></a><a id="6503" href="Swap.Derive.html#6503" class="InductiveConstructor Operator">_∺_</a> <a id="6507" class="Symbol">:</a> <a id="6509" href="Swap.Derive.html#6467" class="Bound">A</a> <a id="6511" class="Symbol">→</a> <a id="6513" href="Swap.Derive.html#6461" class="Datatype">LIST</a> <a id="6518" href="Swap.Derive.html#6467" class="Bound">A</a> <a id="6520" class="Symbol">→</a> <a id="6522" href="Swap.Derive.html#6461" class="Datatype">LIST</a> <a id="6527" href="Swap.Derive.html#6467" class="Bound">A</a>

<a id="6530" class="Comment">-- {-# TERMINATING #-}</a>
<a id="6553" class="Comment">-- unquoteDecl List↔ = DERIVE Swap [ quote LIST , List↔ ]</a>

<a id="6612" class="Keyword">instance</a>
  <a id="List↔"></a><a id="6623" href="Swap.Derive.html#6623" class="Function">List↔</a> <a id="6629" class="Symbol">:</a> <a id="6631" class="Symbol">⦃</a> <a id="6633" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6638" href="Swap.Base.html#132" class="Generalizable">A</a> <a id="6640" class="Symbol">⦄</a> <a id="6642" class="Symbol">→</a> <a id="6644" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6649" class="Symbol">(</a><a id="6650" href="Swap.Derive.html#6461" class="Datatype">LIST</a> <a id="6655" href="Swap.Base.html#132" class="Generalizable">A</a><a id="6656" class="Symbol">)</a>
  <a id="6660" href="Swap.Derive.html#6623" class="Function">List↔</a> <a id="6666" class="Symbol">{</a><a id="6667" href="Swap.Derive.html#6667" class="Bound">A</a><a id="6668" class="Symbol">}</a> <a id="6670" class="Symbol">⦃</a> <a id="6672" href="Swap.Derive.html#6672" class="Bound">A↔</a> <a id="6675" class="Symbol">⦄</a> <a id="6677" class="Symbol">.</a><a id="6678" href="Swap.Base.html#189" class="Field">swap</a> <a id="6683" class="Symbol">=</a> <a id="6685" class="Symbol">λ</a> <a id="6687" href="Swap.Derive.html#6687" class="Bound">𝕒</a> <a id="6689" class="Symbol">→</a> <a id="6691" class="Symbol">λ</a> <a id="6693" href="Swap.Derive.html#6693" class="Bound">𝕓</a> <a id="6695" class="Symbol">→</a> <a id="6697" class="Symbol">λ</a> <a id="6699" class="Keyword">where</a>
    <a id="6709" href="Swap.Derive.html#6490" class="InductiveConstructor">∅</a> <a id="6711" class="Symbol">→</a> <a id="6713" href="Swap.Derive.html#6490" class="InductiveConstructor">∅</a>
    <a id="6719" class="Symbol">(</a><a id="6720" href="Swap.Derive.html#6720" class="Bound">a</a> <a id="6722" href="Swap.Derive.html#6503" class="InductiveConstructor Operator">∺</a> <a id="6724" href="Swap.Derive.html#6724" class="Bound">as</a><a id="6726" class="Symbol">)</a> <a id="6728" class="Symbol">→</a> <a id="6730" href="Swap.Base.html#189" class="Field">swap</a> <a id="6735" href="Swap.Derive.html#6687" class="Bound">𝕒</a> <a id="6737" href="Swap.Derive.html#6693" class="Bound">𝕓</a> <a id="6739" href="Swap.Derive.html#6720" class="Bound">a</a> <a id="6741" href="Swap.Derive.html#6503" class="InductiveConstructor Operator">∺</a> <a id="6743" href="Swap.Base.html#189" class="Field">swap</a> <a id="6748" href="Swap.Derive.html#6687" class="Bound">𝕒</a> <a id="6750" href="Swap.Derive.html#6693" class="Bound">𝕓</a> <a id="6752" href="Swap.Derive.html#6724" class="Bound">as</a>

<a id="6756" class="Keyword">data</a> <a id="λTerm"></a><a id="6761" href="Swap.Derive.html#6761" class="Datatype">λTerm</a> <a id="6767" class="Symbol">:</a> <a id="6769" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6773" class="Keyword">where</a>
  <a id="λTerm._-APP-_"></a><a id="6781" href="Swap.Derive.html#6781" class="InductiveConstructor Operator">_-APP-_</a> <a id="6789" class="Symbol">:</a> <a id="6791" href="Swap.Derive.html#6761" class="Datatype">λTerm</a> <a id="6797" class="Symbol">→</a> <a id="6799" href="Swap.Derive.html#6761" class="Datatype">λTerm</a> <a id="6805" class="Symbol">→</a> <a id="6807" href="Swap.Derive.html#6761" class="Datatype">λTerm</a>
  <a id="λTerm.VAR"></a><a id="6815" href="Swap.Derive.html#6815" class="InductiveConstructor">VAR</a> <a id="6819" class="Symbol">:</a> <a id="6821" href="Swap.Derive.html#376" class="Bound">Atom</a> <a id="6826" class="Symbol">→</a> <a id="6828" href="Swap.Derive.html#6761" class="Datatype">λTerm</a>
  <a id="6836" class="Comment">-- LAM : Atom × λTerm → λTerm</a>
  <a id="6868" class="Comment">-- LAM : Bind?? → Term</a>

<a id="6892" class="Comment">-- λ x . x</a>
<a id="6903" class="Comment">-- ~</a>
<a id="6908" class="Comment">-- LAM (𝕩 , var 𝕩)</a>

<a id="6928" class="Symbol">{-#</a> <a id="6932" class="Keyword">TERMINATING</a> <a id="6944" class="Symbol">#-}</a>
<a id="6948" class="Keyword">unquoteDecl</a> <a id="λTerm↔"></a><a id="6960" href="Swap.Derive.html#6960" class="Function">λTerm↔</a> <a id="6967" class="Symbol">=</a> <a id="6969" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="6976" href="Swap.Base.html#150" class="Record">Swap</a> <a id="6981" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="6983" class="Keyword">quote</a> <a id="6989" href="Swap.Derive.html#6761" class="Datatype">λTerm</a> <a id="6995" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6997" href="Swap.Derive.html#6960" class="Function">λTerm↔</a> <a id="7004" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="7007" class="Comment">-- ** deriving examples</a>

<a id="7032" class="Comment">-- private</a>

  <a id="7046" class="Comment">-- testSwapRefl : (A : Set) ⦃ _ : Swap A ⦄ → Set</a>
  <a id="7097" class="Comment">-- testSwapRefl X ⦃ r ⦄ = ∀ {x : X} → swap ⦃ r ⦄ 𝕒 𝕓 x ≡ x</a>

  <a id="7159" class="Comment">-- ** record types</a>

  <a id="7181" class="Comment">-- record R⁰ : Set where</a>
  <a id="7208" class="Comment">-- instance R∅ = Nameless R⁰ ∋ it</a>

  <a id="7245" class="Comment">-- _ : testSwapRefl R⁰</a>
  <a id="7270" class="Comment">-- _ = refl</a>

<a id="7283" class="Comment">--   instance ℕ↔ = Swap ℕ ∋ λ where .swap → swapId</a>
<a id="7334" class="Comment">--   instance 𝔹↔ = Swap Bool ∋ λ where .swap → swapId</a>

<a id="7389" class="Comment">--   record R¹ : Set where</a>
<a id="7416" class="Comment">--     field x : ℕ</a>
<a id="7435" class="Comment">--   unquoteDecl r¹ = DERIVE Swap [ quote R¹ , r¹ ]</a>
<a id="7487" class="Comment">--   _ = testSwapRefl R¹ ∋ refl</a>

<a id="7520" class="Comment">--   record R¹′ : Set where</a>
<a id="7548" class="Comment">--     field</a>
<a id="7561" class="Comment">--       x : ℕ</a>
<a id="7576" class="Comment">--       y : ℕ</a>
<a id="7591" class="Comment">--       r : R¹</a>
<a id="7607" class="Comment">--   unquoteDecl r¹′ = DERIVE Swap [ quote R¹′ , r¹′ ]</a>
<a id="7662" class="Comment">--   _ = testSwapRefl R¹′ ∋ refl</a>

<a id="7696" class="Comment">--   -- record R² : Set where</a>
<a id="7726" class="Comment">--   --   field</a>
<a id="7742" class="Comment">--   --     x : ℕ × ℤ</a>
<a id="7764" class="Comment">--   --     y : ⊤ ⊎ Bool</a>
<a id="7789" class="Comment">--   -- unquoteDecl r² = DERIVE Swap [ quote R² , r² ]</a>
<a id="7844" class="Comment">--   -- _ = testSwapRefl R² ∋ refl</a>

<a id="7880" class="Comment">--   -- ** inductive datatypes</a>

<a id="7912" class="Comment">--   -- data X⁰ : Set where</a>
<a id="7940" class="Comment">--   -- unquoteDecl x⁰ = DERIVE Swap [ quote X⁰ , x⁰ ]</a>
<a id="7995" class="Comment">--   -- _ = testSwapRefl X⁰ ∋ refl</a>

<a id="8031" class="Comment">--   data X¹ : Set where</a>
<a id="8056" class="Comment">--     x : X¹</a>
<a id="8070" class="Comment">--   unquoteDecl x¹ = DERIVE Swap [ quote X¹ , x¹ ]</a>

<a id="8123" class="Comment">--   data X¹′ : Set where</a>
<a id="8149" class="Comment">--     x : ℕ → X¹′</a>
<a id="8168" class="Comment">--   unquoteDecl x¹′ = DERIVE Swap [ quote X¹′ , x¹′ ]</a>

<a id="8224" class="Comment">--   data X² : Set where</a>
<a id="8249" class="Comment">--     x y : X²</a>
<a id="8265" class="Comment">--   unquoteDecl x² = DERIVE Swap [ quote X² , x² ]</a>

<a id="8318" class="Comment">--   data X²′ : Set where</a>
<a id="8344" class="Comment">--     x y : ℕ → Bool → X²′</a>
<a id="8372" class="Comment">--   unquoteDecl x²′ = DERIVE Swap [ quote X²′ , x²′ ]</a>

<a id="8428" class="Comment">--   _ : swap 𝕒 𝕓 (1 ∷ 2 ∷ 3 ∷ []) ≡ (1 ∷ 2 ∷ 3 ∷ [])</a>
<a id="8482" class="Comment">--   _ = refl</a>

<a id="8497" class="Comment">--   data XX : Set where</a>
<a id="8522" class="Comment">--     c₂ : List X² → XX</a>
<a id="8547" class="Comment">--     c₁ : X¹ → X² → XX</a>
<a id="8572" class="Comment">--   unquoteDecl xx = DERIVE Swap [ quote XX , xx ]</a>
</pre></body></html>