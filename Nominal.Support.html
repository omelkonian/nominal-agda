<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Nominal.Support</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/nominal-agda/tree/master/Nominal/Support.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="25" class="Symbol">;</a> <a id="27" class="Keyword">open</a> <a id="32" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="42" class="Keyword">open</a> <a id="47" href="Prelude.Init.html#7118" class="Module">L.Mem</a>
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="79" class="Keyword">open</a> <a id="84" class="Keyword">import</a> <a id="91" href="Prelude.Setoid.html" class="Module">Prelude.Setoid</a>
<a id="106" class="Keyword">open</a> <a id="111" class="Keyword">import</a> <a id="118" href="Prelude.InfEnumerable.html" class="Module">Prelude.InfEnumerable</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Prelude.InferenceRules.html" class="Module">Prelude.InferenceRules</a>

<a id="176" class="Keyword">module</a> <a id="183" href="Nominal.Support.html" class="Module">Nominal.Support</a> <a id="199" class="Symbol">(</a><a id="200" href="Nominal.Support.html#200" class="Bound">Atom</a> <a id="205" class="Symbol">:</a> <a id="207" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="211" class="Symbol">)</a> <a id="213" class="Symbol">⦃</a> <a id="215" href="Nominal.Support.html#215" class="Bound">_</a> <a id="217" class="Symbol">:</a> <a id="219" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="225" href="Nominal.Support.html#200" class="Bound">Atom</a> <a id="230" class="Symbol">⦄</a> <a id="232" class="Symbol">⦃</a> <a id="234" href="Nominal.Support.html#234" class="Bound">_</a> <a id="236" class="Symbol">:</a> <a id="238" href="Prelude.InfEnumerable.html#663" class="Record">Enumerable∞</a> <a id="250" href="Nominal.Support.html#200" class="Bound">Atom</a> <a id="255" class="Symbol">⦄</a> <a id="257" class="Keyword">where</a>

<a id="264" class="Keyword">open</a> <a id="269" class="Keyword">import</a> <a id="276" href="Nominal.New.html" class="Module">Nominal.New</a>  <a id="289" href="Nominal.Support.html#200" class="Bound">Atom</a>
<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Nominal.Swap.html" class="Module">Nominal.Swap</a> <a id="319" href="Nominal.Support.html#200" class="Bound">Atom</a>

<a id="freshAtom"></a><a id="325" href="Nominal.Support.html#325" class="Function">freshAtom</a> <a id="335" class="Symbol">:</a> <a id="337" href="Nominal.Swap.Base.html#318" class="Function">Atoms</a> <a id="343" class="Symbol">→</a> <a id="345" href="Nominal.Support.html#200" class="Bound">Atom</a>
<a id="350" href="Nominal.Support.html#325" class="Function">freshAtom</a> <a id="360" class="Symbol">=</a> <a id="362" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="368" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="370" href="Prelude.InfEnumerable.html#1923" class="Function">minFresh</a>

<a id="freshAtom∉"></a><a id="380" href="Nominal.Support.html#380" class="Function">freshAtom∉</a> <a id="391" class="Symbol">:</a> <a id="393" class="Symbol">∀</a> <a id="395" class="Symbol">{</a><a id="396" href="Nominal.Support.html#396" class="Bound">xs</a> <a id="399" class="Symbol">:</a> <a id="401" href="Nominal.Swap.Base.html#318" class="Function">Atoms</a><a id="406" class="Symbol">}</a> <a id="408" class="Symbol">→</a> <a id="410" href="Nominal.Support.html#325" class="Function">freshAtom</a> <a id="420" href="Nominal.Support.html#396" class="Bound">xs</a> <a id="423" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="425" href="Nominal.Support.html#396" class="Bound">xs</a>
<a id="428" href="Nominal.Support.html#380" class="Function">freshAtom∉</a> <a id="439" class="Symbol">{</a><a id="440" href="Nominal.Support.html#440" class="Bound">xs</a><a id="442" class="Symbol">}</a> <a id="444" class="Symbol">=</a> <a id="446" href="Prelude.InfEnumerable.html#1923" class="Function">minFresh</a> <a id="455" href="Nominal.Support.html#440" class="Bound">xs</a> <a id="458" class="Symbol">.</a><a id="459" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>

<a id="466" class="Keyword">private</a> <a id="474" class="Keyword">variable</a> <a id="483" href="Nominal.Support.html#483" class="Generalizable">A</a> <a id="485" class="Symbol">:</a> <a id="487" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="492" href="Prelude.Init.html#261" class="Generalizable">ℓ</a><a id="493" class="Symbol">;</a> <a id="495" href="Nominal.Support.html#495" class="Generalizable">B</a> <a id="497" class="Symbol">:</a> <a id="499" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="504" href="Prelude.Init.html#263" class="Generalizable">ℓ′</a>

<a id="508" class="Keyword">module</a> <a id="515" href="Nominal.Support.html#515" class="Module">_</a> <a id="517" class="Symbol">⦃</a> <a id="519" href="Nominal.Support.html#519" class="Bound">_</a> <a id="521" class="Symbol">:</a> <a id="523" href="Nominal.Swap.Base.html#401" class="Record">Swap</a> <a id="528" href="Nominal.Support.html#483" class="Generalizable">A</a> <a id="530" class="Symbol">⦄</a> <a id="532" class="Symbol">⦃</a> <a id="534" href="Nominal.Support.html#534" class="Bound">_</a> <a id="536" class="Symbol">:</a> <a id="538" href="Prelude.Setoid.Core.html#107" class="Record">ISetoid</a> <a id="546" href="Nominal.Support.html#483" class="Generalizable">A</a> <a id="548" class="Symbol">⦄</a> <a id="550" class="Keyword">where</a>

  <a id="559" class="Keyword">infix</a> <a id="565" class="Number">4</a> <a id="567" href="Nominal.Support.html#573" class="Function Operator">_♯_</a>
  <a id="573" href="Nominal.Support.html#573" class="Function Operator">_♯_</a> <a id="577" class="Symbol">:</a> <a id="579" href="Nominal.Support.html#200" class="Bound">Atom</a> <a id="584" class="Symbol">→</a> <a id="586" href="Nominal.Support.html#528" class="Bound">A</a> <a id="588" class="Symbol">→</a> <a id="590" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="595" class="Symbol">_</a>
  <a id="599" href="Nominal.Support.html#599" class="Bound">𝕒</a> <a id="601" href="Nominal.Support.html#573" class="Function Operator">♯</a> <a id="603" href="Nominal.Support.html#603" class="Bound">x</a> <a id="605" class="Symbol">=</a> <a id="607" href="Nominal.New.html#169" class="Function">И</a> <a id="609" class="Symbol">λ</a> <a id="611" href="Nominal.Support.html#611" class="Bound">𝕓</a> <a id="613" class="Symbol">→</a> <a id="615" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="620" href="Nominal.Support.html#611" class="Bound">𝕓</a> <a id="622" href="Nominal.Support.html#599" class="Bound">𝕒</a> <a id="624" href="Nominal.Support.html#603" class="Bound">x</a> <a id="626" href="Prelude.Setoid.Core.html#191" class="Field Operator">≈</a> <a id="628" href="Nominal.Support.html#603" class="Bound">x</a>

  <a id="633" href="Nominal.Support.html#633" class="Function">FinSupp</a> <a id="641" class="Symbol">:</a> <a id="643" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="648" href="Nominal.Support.html#528" class="Bound">A</a> <a id="650" class="Symbol">_</a>
  <a id="654" href="Nominal.Support.html#633" class="Function">FinSupp</a> <a id="662" href="Nominal.Support.html#662" class="Bound">x</a> <a id="664" class="Symbol">=</a> <a id="666" href="Nominal.New.html#827" class="Function">И²</a> <a id="669" class="Symbol">λ</a> <a id="671" href="Nominal.Support.html#671" class="Bound">𝕒</a> <a id="673" href="Nominal.Support.html#673" class="Bound">𝕓</a> <a id="675" class="Symbol">→</a> <a id="677" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="682" href="Nominal.Support.html#673" class="Bound">𝕓</a> <a id="684" href="Nominal.Support.html#671" class="Bound">𝕒</a> <a id="686" href="Nominal.Support.html#662" class="Bound">x</a> <a id="688" href="Prelude.Setoid.Core.html#191" class="Field Operator">≈</a> <a id="690" href="Nominal.Support.html#662" class="Bound">x</a>

  <a id="695" class="Comment">-- alternative definition of equivariance based on (finite) support</a>
  <a id="765" class="Comment">--  * equivariant(x) := supp(x) = ∅</a>
  <a id="803" href="Nominal.Support.html#803" class="Function">Equivariant′</a> <a id="816" class="Symbol">:</a> <a id="818" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="823" href="Nominal.Support.html#528" class="Bound">A</a> <a id="825" class="Symbol">_</a>
  <a id="829" href="Nominal.Support.html#803" class="Function">Equivariant′</a> <a id="842" href="Nominal.Support.html#842" class="Bound">x</a> <a id="844" class="Symbol">=</a> <a id="846" href="Data.Product.html#1378" class="Function">∃</a> <a id="848" class="Symbol">λ</a> <a id="850" class="Symbol">(</a><a id="851" href="Nominal.Support.html#851" class="Bound">fin-x</a> <a id="857" class="Symbol">:</a> <a id="859" href="Nominal.Support.html#633" class="Function">FinSupp</a> <a id="867" href="Nominal.Support.html#842" class="Bound">x</a><a id="868" class="Symbol">)</a> <a id="870" class="Symbol">→</a> <a id="872" href="Nominal.Support.html#851" class="Bound">fin-x</a> <a id="878" class="Symbol">.</a><a id="879" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="885" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="887" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

  <a id="893" href="Nominal.Support.html#893" class="Function">MinSupp</a> <a id="901" class="Symbol">:</a> <a id="903" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="908" class="Symbol">(</a><a id="909" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="914" href="Nominal.Support.html#200" class="Bound">Atom</a> <a id="919" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="921" href="Nominal.Support.html#528" class="Bound">A</a><a id="922" class="Symbol">)</a> <a id="924" class="Symbol">_</a>
  <a id="928" href="Nominal.Support.html#893" class="Function">MinSupp</a> <a id="936" class="Symbol">(</a><a id="937" href="Nominal.Support.html#937" class="Bound">xs</a> <a id="940" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="942" href="Nominal.Support.html#942" class="Bound">a</a><a id="943" class="Symbol">)</a> <a id="945" class="Symbol">=</a>
    <a id="951" class="Symbol">(∀</a> <a id="954" href="Nominal.Support.html#954" class="Bound">x</a> <a id="956" href="Nominal.Support.html#956" class="Bound">y</a> <a id="958" class="Symbol">→</a> <a id="960" href="Nominal.Support.html#954" class="Bound">x</a> <a id="962" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="964" href="Nominal.Support.html#937" class="Bound">xs</a> <a id="967" class="Symbol">→</a> <a id="969" href="Nominal.Support.html#956" class="Bound">y</a> <a id="971" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="973" href="Nominal.Support.html#937" class="Bound">xs</a> <a id="976" class="Symbol">→</a> <a id="978" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="983" href="Nominal.Support.html#954" class="Bound">x</a> <a id="985" href="Nominal.Support.html#956" class="Bound">y</a> <a id="987" href="Nominal.Support.html#942" class="Bound">a</a> <a id="989" href="Prelude.Setoid.Core.html#191" class="Field Operator">≈</a> <a id="991" href="Nominal.Support.html#942" class="Bound">a</a><a id="992" class="Symbol">)</a>
    <a id="998" href="Data.Product.html#1176" class="Function Operator">×</a>
    <a id="1004" class="Symbol">(∀</a> <a id="1007" href="Nominal.Support.html#1007" class="Bound">x</a> <a id="1009" href="Nominal.Support.html#1009" class="Bound">y</a> <a id="1011" class="Symbol">→</a> <a id="1013" href="Nominal.Support.html#1007" class="Bound">x</a> <a id="1015" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="1017" href="Nominal.Support.html#937" class="Bound">xs</a> <a id="1020" class="Symbol">→</a> <a id="1022" href="Nominal.Support.html#1009" class="Bound">y</a> <a id="1024" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="1026" href="Nominal.Support.html#937" class="Bound">xs</a> <a id="1029" class="Symbol">→</a> <a id="1031" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="1036" href="Nominal.Support.html#1007" class="Bound">x</a> <a id="1038" href="Nominal.Support.html#1009" class="Bound">y</a> <a id="1040" href="Nominal.Support.html#942" class="Bound">a</a> <a id="1042" href="Prelude.Setoid.Core.html#211" class="Function Operator">≉</a> <a id="1044" href="Nominal.Support.html#942" class="Bound">a</a><a id="1045" class="Symbol">)</a>

  <a id="1050" class="Comment">-- И⅁ λ 𝕒 𝕓 → swap 𝕓 𝕒 x ≉ x</a>

  <a id="1082" href="Nominal.Support.html#1082" class="Function">MinFinSupp</a> <a id="1093" class="Symbol">:</a> <a id="1095" class="Symbol">∀</a> <a id="1097" class="Symbol">{</a><a id="1098" href="Nominal.Support.html#1098" class="Bound">a</a> <a id="1100" class="Symbol">:</a> <a id="1102" href="Nominal.Support.html#528" class="Bound">A</a><a id="1103" class="Symbol">}</a> <a id="1105" class="Symbol">→</a> <a id="1107" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1112" class="Symbol">(</a><a id="1113" href="Nominal.Support.html#633" class="Function">FinSupp</a> <a id="1121" href="Nominal.Support.html#1098" class="Bound">a</a><a id="1122" class="Symbol">)</a> <a id="1124" class="Symbol">_</a>
  <a id="1128" href="Nominal.Support.html#1082" class="Function">MinFinSupp</a> <a id="1139" class="Symbol">{</a><a id="1140" class="Argument">a</a> <a id="1142" class="Symbol">=</a> <a id="1144" href="Nominal.Support.html#1144" class="Bound">a</a><a id="1145" class="Symbol">}</a> <a id="1147" class="Symbol">(</a><a id="1148" href="Nominal.Support.html#1148" class="Bound">xs</a> <a id="1151" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1153" href="Nominal.Support.html#1153" class="Bound">p</a><a id="1154" class="Symbol">)</a> <a id="1156" class="Symbol">=</a>
    <a id="1162" class="Comment">-- MinSupp (xs , a)</a>
    <a id="1186" class="Symbol">(∀</a> <a id="1189" href="Nominal.Support.html#1189" class="Bound">x</a> <a id="1191" href="Nominal.Support.html#1191" class="Bound">y</a> <a id="1193" class="Symbol">→</a> <a id="1195" href="Nominal.Support.html#1189" class="Bound">x</a> <a id="1197" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="1199" href="Nominal.Support.html#1148" class="Bound">xs</a> <a id="1202" class="Symbol">→</a> <a id="1204" href="Nominal.Support.html#1191" class="Bound">y</a> <a id="1206" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="1208" href="Nominal.Support.html#1148" class="Bound">xs</a> <a id="1211" class="Symbol">→</a> <a id="1213" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="1218" href="Nominal.Support.html#1189" class="Bound">x</a> <a id="1220" href="Nominal.Support.html#1191" class="Bound">y</a> <a id="1222" href="Nominal.Support.html#1144" class="Bound">a</a> <a id="1224" href="Prelude.Setoid.Core.html#211" class="Function Operator">≉</a> <a id="1226" href="Nominal.Support.html#1144" class="Bound">a</a><a id="1227" class="Symbol">)</a>

<a id="1230" class="Comment">-- counter-example</a>
<a id="1249" class="Comment">-- λ x → (x == 𝕒) ∨ (x == 𝕓)</a>

<a id="1279" class="Keyword">record</a> <a id="FinitelySupported"></a><a id="1286" href="Nominal.Support.html#1286" class="Record">FinitelySupported</a> <a id="1304" class="Symbol">(</a><a id="1305" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1307" class="Symbol">:</a> <a id="1309" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1314" href="Prelude.Init.html#261" class="Generalizable">ℓ</a><a id="1315" class="Symbol">)</a>
  <a id="1319" class="Symbol">⦃</a> <a id="1321" href="Nominal.Support.html#1321" class="Bound">_</a> <a id="1323" class="Symbol">:</a> <a id="1325" href="Prelude.Setoid.Core.html#107" class="Record">ISetoid</a> <a id="1333" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1335" class="Symbol">⦄</a> <a id="1337" class="Symbol">⦃</a> <a id="1339" href="Nominal.Support.html#1339" class="Bound">_</a> <a id="1341" class="Symbol">:</a> <a id="1343" href="Prelude.Setoid.Core.html#307" class="Record">SetoidLaws</a> <a id="1354" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1356" class="Symbol">⦄</a>
  <a id="1360" class="Symbol">⦃</a> <a id="1362" href="Nominal.Support.html#1362" class="Bound">_</a> <a id="1364" class="Symbol">:</a> <a id="1366" href="Nominal.Swap.Base.html#401" class="Record">Swap</a> <a id="1371" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1373" class="Symbol">⦄</a> <a id="1375" class="Symbol">⦃</a> <a id="1377" href="Nominal.Support.html#1377" class="Bound">_</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Nominal.Swap.Base.html#2629" class="Record">SwapLaws</a> <a id="1390" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1392" class="Symbol">⦄</a> <a id="1394" class="Symbol">:</a> <a id="1396" href="Agda.Primitive.html#375" class="Primitive">Typeω</a>
  <a id="1404" class="Keyword">where</a>

  <a id="1413" class="Keyword">field</a> <a id="FinitelySupported.∀fin"></a><a id="1419" href="Nominal.Support.html#1419" class="Field">∀fin</a> <a id="1424" class="Symbol">:</a> <a id="1426" href="Relation.Unary.html#3230" class="Function">Unary.Universal</a> <a id="1442" href="Nominal.Support.html#633" class="Function">FinSupp</a>

  <a id="FinitelySupported.supp"></a><a id="1453" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="1458" class="Symbol">:</a> <a id="1460" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="1462" class="Symbol">→</a> <a id="1464" href="Nominal.Swap.Base.html#318" class="Function">Atoms</a>
  <a id="1472" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="1477" class="Symbol">=</a> <a id="1479" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1485" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1487" href="Nominal.Support.html#1419" class="Field">∀fin</a>

  <a id="FinitelySupported._∙supp"></a><a id="1495" href="Nominal.Support.html#1495" class="Function Operator">_∙supp</a> <a id="1502" class="Symbol">=</a> <a id="1504" href="Nominal.Support.html#1453" class="Function">supp</a>

  <a id="1512" class="Comment">-- T0D0: extract minimal support</a>
  <a id="1547" class="Comment">--   i.e. filter out elements of `supp` that already satisfy P</a>
  <a id="1612" class="Comment">-- module _ ⦃ _ : IDecSetoid A ⦄ where</a>
  <a id="1653" class="Comment">--   minSupp : A → Atoms</a>
  <a id="1680" class="Comment">--   minSupp a =</a>
  <a id="1699" class="Comment">--     let xs , P = ∀fin a</a>
  <a id="1728" class="Comment">--     in  filter ? xs</a>
  <a id="1753" class="Comment">--     ?</a>
  <a id="1764" class="Comment">-- NB: doesn&#39;t hold in general ⇒ leads to a solution to the halting problem</a>
  <a id="1842" class="Comment">-- T0D0: find a characterization of this decidable sub-space</a>

  <a id="FinitelySupported.fresh∉"></a><a id="1906" href="Nominal.Support.html#1906" class="Function">fresh∉</a> <a id="1913" class="Symbol">:</a> <a id="1915" class="Symbol">(</a><a id="1916" href="Nominal.Support.html#1916" class="Bound">a</a> <a id="1918" class="Symbol">:</a> <a id="1920" href="Nominal.Support.html#1305" class="Bound">A</a><a id="1921" class="Symbol">)</a> <a id="1923" class="Symbol">→</a> <a id="1925" href="Data.Product.html#1378" class="Function">∃</a> <a id="1927" class="Symbol">(</a><a id="1928" href="Data.List.Membership.Setoid.html#945" class="Function Operator">_∉</a> <a id="1931" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="1936" href="Nominal.Support.html#1916" class="Bound">a</a><a id="1937" class="Symbol">)</a>
  <a id="1941" href="Nominal.Support.html#1906" class="Function">fresh∉</a> <a id="1948" class="Symbol">=</a> <a id="1950" href="Prelude.InfEnumerable.html#1923" class="Function">minFresh</a> <a id="1959" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1961" href="Nominal.Support.html#1453" class="Function">supp</a>
  <a id="1968" class="Comment">-- NB: optimized fresh that generates the *least* element</a>

  <a id="FinitelySupported.fresh-var"></a><a id="2029" href="Nominal.Support.html#2029" class="Function">fresh-var</a> <a id="2039" class="Symbol">:</a> <a id="2041" href="Nominal.Support.html#1305" class="Bound">A</a> <a id="2043" class="Symbol">→</a> <a id="2045" href="Nominal.Support.html#200" class="Bound">Atom</a>
  <a id="2052" href="Nominal.Support.html#2029" class="Function">fresh-var</a> <a id="2062" class="Symbol">=</a> <a id="2064" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2070" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2072" href="Nominal.Support.html#1906" class="Function">fresh∉</a>

  <a id="FinitelySupported.swap-fresh"></a><a id="2082" href="Nominal.Support.html#2082" class="Function">swap-fresh</a> <a id="2093" class="Symbol">:</a> <a id="2095" class="Symbol">∀</a> <a id="2097" class="Symbol">{</a><a id="2098" href="Nominal.Support.html#2098" class="Bound">𝕒</a> <a id="2100" href="Nominal.Support.html#2100" class="Bound">𝕓</a><a id="2101" class="Symbol">}</a> <a id="2103" class="Symbol">(</a><a id="2104" href="Nominal.Support.html#2104" class="Bound">x</a> <a id="2106" class="Symbol">:</a> <a id="2108" href="Nominal.Support.html#1305" class="Bound">A</a><a id="2109" class="Symbol">)</a> <a id="2111" class="Symbol">→</a>
    <a id="2117" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2119" href="Nominal.Support.html#2098" class="Bound">𝕒</a> <a id="2121" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="2123" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="2128" href="Nominal.Support.html#2104" class="Bound">x</a>
    <a id="2134" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2136" href="Nominal.Support.html#2100" class="Bound">𝕓</a> <a id="2138" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="2140" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="2145" href="Nominal.Support.html#2104" class="Bound">x</a>
      <a id="2153" href="Prelude.InferenceRules.html#14232" class="Function Operator">────────────────</a>
      <a id="2176" href="Nominal.Swap.Base.html#620" class="Function Operator">⦅</a> <a id="2178" href="Nominal.Support.html#2098" class="Bound">𝕒</a> <a id="2180" href="Nominal.Swap.Base.html#620" class="Function Operator">↔</a> <a id="2182" href="Nominal.Support.html#2100" class="Bound">𝕓</a> <a id="2184" href="Nominal.Swap.Base.html#620" class="Function Operator">⦆</a> <a id="2186" href="Nominal.Support.html#2104" class="Bound">x</a> <a id="2188" href="Prelude.Setoid.Core.html#191" class="Field Operator">≈</a> <a id="2190" href="Nominal.Support.html#2104" class="Bound">x</a>
  <a id="2194" href="Nominal.Support.html#2082" class="Function">swap-fresh</a> <a id="2205" href="Nominal.Support.html#2205" class="Bound">x</a> <a id="2207" class="Symbol">=</a> <a id="2209" href="Function.Base.html#1563" class="Function">flip</a> <a id="2214" class="Symbol">(</a><a id="2215" href="Nominal.Support.html#1419" class="Field">∀fin</a> <a id="2220" href="Nominal.Support.html#2205" class="Bound">x</a> <a id="2222" class="Symbol">.</a><a id="2223" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2229" class="Symbol">_</a> <a id="2231" class="Symbol">_)</a>

  <a id="FinitelySupported.∃fresh"></a><a id="2237" href="Nominal.Support.html#2237" class="Function">∃fresh</a> <a id="2244" class="Symbol">:</a> <a id="2246" class="Symbol">∀</a> <a id="2248" class="Symbol">(</a><a id="2249" href="Nominal.Support.html#2249" class="Bound">x</a> <a id="2251" class="Symbol">:</a> <a id="2253" href="Nominal.Support.html#1305" class="Bound">A</a><a id="2254" class="Symbol">)</a> <a id="2256" class="Symbol">→</a> <a id="2258" href="Data.Product.html#1378" class="Function">∃</a> <a id="2260" class="Symbol">λ</a> <a id="2262" href="Nominal.Support.html#2262" class="Bound">𝕒</a> <a id="2264" class="Symbol">→</a> <a id="2266" href="Data.Product.html#1378" class="Function">∃</a> <a id="2268" class="Symbol">λ</a> <a id="2270" href="Nominal.Support.html#2270" class="Bound">𝕓</a> <a id="2272" class="Symbol">→</a>
      <a id="2280" class="Symbol">(</a><a id="2281" href="Nominal.Support.html#2262" class="Bound">𝕒</a> <a id="2283" href="Nominal.Support.html#573" class="Function Operator">♯</a> <a id="2285" href="Nominal.Support.html#2249" class="Bound">x</a><a id="2286" class="Symbol">)</a>
    <a id="2292" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2294" class="Symbol">(</a><a id="2295" href="Nominal.Support.html#2270" class="Bound">𝕓</a> <a id="2297" href="Nominal.Support.html#573" class="Function Operator">♯</a> <a id="2299" href="Nominal.Support.html#2249" class="Bound">x</a><a id="2300" class="Symbol">)</a>
    <a id="2306" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2308" class="Symbol">(</a><a id="2309" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="2314" href="Nominal.Support.html#2270" class="Bound">𝕓</a> <a id="2316" href="Nominal.Support.html#2262" class="Bound">𝕒</a> <a id="2318" href="Nominal.Support.html#2249" class="Bound">x</a> <a id="2320" href="Prelude.Setoid.Core.html#191" class="Field Operator">≈</a> <a id="2322" href="Nominal.Support.html#2249" class="Bound">x</a><a id="2323" class="Symbol">)</a>
  <a id="2327" href="Nominal.Support.html#2237" class="Function">∃fresh</a> <a id="2334" href="Nominal.Support.html#2334" class="Bound">x</a> <a id="2336" class="Symbol">=</a>
    <a id="2342" class="Keyword">let</a> <a id="2346" href="Nominal.Support.html#2346" class="Bound">xs</a> <a id="2349" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2351" href="Nominal.Support.html#2351" class="Bound">swap≈</a> <a id="2357" class="Symbol">=</a> <a id="2359" href="Nominal.Support.html#1419" class="Field">∀fin</a> <a id="2364" href="Nominal.Support.html#2334" class="Bound">x</a>
        <a id="2374" class="Comment">-- ((a ∷ b ∷ []) , (a∉ V.All.∷ b∉ V.All.∷ V.All.[])) = (fresh^ 2) xs</a>
        <a id="2451" href="Nominal.Support.html#2451" class="Bound">a</a> <a id="2453" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2455" href="Nominal.Support.html#2455" class="Bound">a∉</a> <a id="2458" class="Symbol">=</a> <a id="2460" href="Prelude.InfEnumerable.html#1923" class="Function">minFresh</a> <a id="2469" href="Nominal.Support.html#2346" class="Bound">xs</a>
        <a id="2480" href="Nominal.Support.html#2480" class="Bound">b</a> <a id="2482" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2484" href="Nominal.Support.html#2484" class="Bound">b∉</a> <a id="2487" class="Symbol">=</a> <a id="2489" href="Prelude.InfEnumerable.html#1923" class="Function">minFresh</a> <a id="2498" href="Nominal.Support.html#2346" class="Bound">xs</a>

        <a id="2510" href="Nominal.Support.html#2510" class="Bound">p</a> <a id="2512" class="Symbol">:</a> <a id="2514" href="Nominal.Support.html#2451" class="Bound">a</a> <a id="2516" href="Nominal.Support.html#573" class="Function Operator">♯</a> <a id="2518" href="Nominal.Support.html#2334" class="Bound">x</a>
        <a id="2528" href="Nominal.Support.html#2510" class="Bound">p</a> <a id="2530" class="Symbol">=</a> <a id="2532" href="Nominal.Support.html#2346" class="Bound">xs</a> <a id="2535" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2537" class="Symbol">λ</a> <a id="2539" href="Nominal.Support.html#2539" class="Bound">y</a> <a id="2541" href="Nominal.Support.html#2541" class="Bound">y∉</a> <a id="2544" class="Symbol">→</a> <a id="2546" href="Nominal.Support.html#2351" class="Bound">swap≈</a> <a id="2552" href="Nominal.Support.html#2451" class="Bound">a</a> <a id="2554" href="Nominal.Support.html#2539" class="Bound">y</a> <a id="2556" href="Nominal.Support.html#2455" class="Bound">a∉</a> <a id="2559" href="Nominal.Support.html#2541" class="Bound">y∉</a>

        <a id="2571" href="Nominal.Support.html#2571" class="Bound">q</a> <a id="2573" class="Symbol">:</a> <a id="2575" href="Nominal.Support.html#2480" class="Bound">b</a> <a id="2577" href="Nominal.Support.html#573" class="Function Operator">♯</a> <a id="2579" href="Nominal.Support.html#2334" class="Bound">x</a>
        <a id="2589" href="Nominal.Support.html#2571" class="Bound">q</a> <a id="2591" class="Symbol">=</a> <a id="2593" href="Nominal.Support.html#2346" class="Bound">xs</a> <a id="2596" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2598" class="Symbol">λ</a> <a id="2600" href="Nominal.Support.html#2600" class="Bound">y</a> <a id="2602" href="Nominal.Support.html#2602" class="Bound">y∉</a> <a id="2605" class="Symbol">→</a> <a id="2607" href="Nominal.Support.html#2351" class="Bound">swap≈</a> <a id="2613" href="Nominal.Support.html#2480" class="Bound">b</a> <a id="2615" href="Nominal.Support.html#2600" class="Bound">y</a> <a id="2617" href="Nominal.Support.html#2484" class="Bound">b∉</a> <a id="2620" href="Nominal.Support.html#2602" class="Bound">y∉</a>

    <a id="2628" class="Keyword">in</a> <a id="2631" href="Nominal.Support.html#2451" class="Bound">a</a> <a id="2633" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2635" href="Nominal.Support.html#2480" class="Bound">b</a> <a id="2637" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2639" href="Nominal.Support.html#2510" class="Bound">p</a> <a id="2641" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2643" href="Nominal.Support.html#2571" class="Bound">q</a> <a id="2645" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2647" href="Nominal.Support.html#2351" class="Bound">swap≈</a> <a id="2653" href="Nominal.Support.html#2451" class="Bound">a</a> <a id="2655" href="Nominal.Support.html#2480" class="Bound">b</a> <a id="2657" href="Nominal.Support.html#2455" class="Bound">a∉</a> <a id="2660" href="Nominal.Support.html#2484" class="Bound">b∉</a>

  <a id="2666" class="Comment">-- T0D0: meta-programming tactic `fresh-in-context` (big sister to `deriveSwap`)</a>
  <a id="2749" class="Comment">-- NB: these tactics correspond to two fundamental axioms/notions in nominal sets</a>
  <a id="2833" class="Comment">-- (c.f. EZFA)</a>

<a id="2849" class="Comment">{-
  supp-swap : ∀ {𝕒 𝕓} (t : A) → supp (swap 𝕒 𝕓 t) ⊆ 𝕒 ∷ 𝕓 ∷ t ∷ []
  -- ≡ swap 𝕒 𝕓 (supp t) -- [swap 𝕒 𝕓 x₁, swap 𝕒 𝕓 x₂, ...]
  supp-swap {x}{a}{b} x∉ = ?

  swap-∉ : ∀ {x 𝕒 𝕓} (t : A) → x ∉ supp t → swap 𝕒 𝕓 x ∉ supp (swap 𝕒 𝕓 t)
  -- T0D0: add hypothesis `x ∉ [a, b]`
  swap-∉ {x}{a}{b} x∉
    with x ≟ a
  ... | yes refl
    -- b ∉ supp (swap a b t)
    = ?
  ... | no x≢a
    with x ≟ b
  ... | yes refl
    -- a ∉ supp (swap a b t)
    = ?
  ... | no x≢b
    -- x ∉ supp (swap a b t)
    = ?
-}</a>
<a id="3353" class="Keyword">open</a> <a id="3358" href="Nominal.Support.html#1286" class="Module">FinitelySupported</a> <a id="3376" class="Symbol">⦃...⦄</a> <a id="3382" class="Keyword">public</a>

<a id="3390" class="Keyword">instance</a>
  <a id="FinSupp-Atom"></a><a id="3401" href="Nominal.Support.html#3401" class="Function">FinSupp-Atom</a> <a id="3414" class="Symbol">:</a> <a id="3416" href="Nominal.Support.html#1286" class="Record">FinitelySupported</a> <a id="3434" href="Nominal.Support.html#200" class="Bound">Atom</a>
  <a id="3441" href="Nominal.Support.html#3401" class="Function">FinSupp-Atom</a> <a id="3454" class="Symbol">.</a><a id="3455" href="Nominal.Support.html#1419" class="Field">∀fin</a> <a id="3460" href="Nominal.Support.html#3460" class="Bound">𝕒</a> <a id="3462" class="Symbol">=</a> <a id="3464" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="3466" href="Nominal.Support.html#3460" class="Bound">𝕒</a> <a id="3468" href="Data.List.Base.html#5034" class="Function Operator">]</a> <a id="3470" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3472" class="Symbol">λ</a> <a id="3474" href="Nominal.Support.html#3474" class="Bound">_</a> <a id="3476" href="Nominal.Support.html#3476" class="Bound">_</a> <a id="3478" href="Nominal.Support.html#3478" class="Bound">y∉</a> <a id="3481" href="Nominal.Support.html#3481" class="Bound">z∉</a> <a id="3484" class="Symbol">→</a>
    <a id="3490" href="Nominal.Swap.Base.html#2229" class="Function">swap-noop</a> <a id="3500" class="Symbol">_</a> <a id="3502" class="Symbol">_</a> <a id="3504" class="Symbol">_</a> <a id="3506" class="Symbol">λ</a> <a id="3508" class="Keyword">where</a> <a id="3514" href="Nominal.Swap.Base.html#2455" class="InductiveConstructor">♯0</a> <a id="3517" class="Symbol">→</a> <a id="3519" href="Nominal.Support.html#3481" class="Bound">z∉</a> <a id="3522" href="Nominal.Swap.Base.html#2455" class="InductiveConstructor">♯0</a><a id="3524" class="Symbol">;</a> <a id="3526" href="Nominal.Swap.Base.html#2478" class="InductiveConstructor">♯1</a> <a id="3529" class="Symbol">→</a> <a id="3531" href="Nominal.Support.html#3478" class="Bound">y∉</a> <a id="3534" href="Nominal.Swap.Base.html#2455" class="InductiveConstructor">♯0</a>

<a id="3538" class="Keyword">private</a> <a id="3546" class="Keyword">pattern</a> <a id="𝟘"></a><a id="3554" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a> <a id="3556" class="Symbol">=</a> <a id="3558" class="InductiveConstructor">here</a> <a id="3563" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="3567" class="Symbol">;</a> <a id="3569" class="Keyword">pattern</a> <a id="𝟙"></a><a id="3577" href="Nominal.Support.html#3577" class="InductiveConstructor">𝟙</a> <a id="3579" class="Symbol">=</a> <a id="3581" class="InductiveConstructor">there</a> <a id="3587" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a><a id="3588" class="Symbol">;</a> <a id="3590" class="Keyword">pattern</a> <a id="𝟚"></a><a id="3598" href="Nominal.Support.html#3598" class="InductiveConstructor">𝟚</a> <a id="3600" class="Symbol">=</a> <a id="3602" class="InductiveConstructor">there</a> <a id="3608" href="Nominal.Support.html#3577" class="InductiveConstructor">𝟙</a>

<a id="3611" class="Comment">-- T0D0: generalize this to more complex types than Atom (c.f. supp-swap above)</a>
<a id="supp-swap-atom"></a><a id="3691" href="Nominal.Support.html#3691" class="Function">supp-swap-atom</a> <a id="3706" class="Symbol">:</a> <a id="3708" class="Symbol">∀</a> <a id="3710" class="Symbol">{</a><a id="3711" href="Nominal.Support.html#3711" class="Bound">𝕒</a> <a id="3713" href="Nominal.Support.html#3713" class="Bound">𝕓</a><a id="3714" class="Symbol">}</a> <a id="3716" class="Symbol">(</a><a id="3717" href="Nominal.Support.html#3717" class="Bound">t</a> <a id="3719" class="Symbol">:</a> <a id="3721" href="Nominal.Support.html#200" class="Bound">Atom</a><a id="3725" class="Symbol">)</a> <a id="3727" class="Symbol">→</a> <a id="3729" href="Nominal.Support.html#1453" class="Function">supp</a> <a id="3734" class="Symbol">(</a><a id="3735" href="Nominal.Swap.Base.html#442" class="Field">swap</a> <a id="3740" href="Nominal.Support.html#3711" class="Bound">𝕒</a> <a id="3742" href="Nominal.Support.html#3713" class="Bound">𝕓</a> <a id="3744" href="Nominal.Support.html#3717" class="Bound">t</a><a id="3745" class="Symbol">)</a> <a id="3747" href="Data.List.Relation.Binary.Subset.Setoid.html#748" class="Function Operator">⊆</a> <a id="3749" href="Nominal.Support.html#3711" class="Bound">𝕒</a> <a id="3751" class="InductiveConstructor Operator">∷</a> <a id="3753" href="Nominal.Support.html#3713" class="Bound">𝕓</a> <a id="3755" class="InductiveConstructor Operator">∷</a> <a id="3757" href="Nominal.Support.html#3717" class="Bound">t</a> <a id="3759" class="InductiveConstructor Operator">∷</a> <a id="3761" class="InductiveConstructor">[]</a>
<a id="3764" class="Comment">-- supp (swap 𝕒 𝕓 t) ≡ swap 𝕒 𝕓 (supp t)</a>
<a id="3805" href="Nominal.Support.html#3691" class="Function">supp-swap-atom</a> <a id="3820" class="Symbol">{</a><a id="3821" href="Nominal.Support.html#3821" class="Bound">a</a><a id="3822" class="Symbol">}{</a><a id="3824" href="Nominal.Support.html#3824" class="Bound">b</a><a id="3825" class="Symbol">}</a> <a id="3827" href="Nominal.Support.html#3827" class="Bound">t</a>
  <a id="3831" class="Keyword">with</a> <a id="3836" href="Nominal.Support.html#3827" class="Bound">t</a> <a id="3838" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟</a> <a id="3840" href="Nominal.Support.html#3821" class="Bound">a</a>
<a id="3842" class="Symbol">...</a> <a id="3846" class="Symbol">|</a> <a id="3848" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="3852" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="3857" class="Symbol">=</a> <a id="3859" class="Symbol">λ</a> <a id="3861" class="Keyword">where</a> <a id="3867" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a> <a id="3869" class="Symbol">→</a> <a id="3871" href="Nominal.Support.html#3577" class="InductiveConstructor">𝟙</a>
<a id="3873" class="Symbol">...</a> <a id="3877" class="Symbol">|</a> <a id="3879" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="3882" class="Symbol">_</a>
  <a id="3886" class="Keyword">with</a> <a id="3891" class="Bound">t</a> <a id="3893" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟</a> <a id="3895" class="Bound">b</a>
<a id="3897" class="Symbol">...</a> <a id="3901" class="Symbol">|</a> <a id="3903" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="3907" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="3912" class="Symbol">=</a> <a id="3914" class="Symbol">λ</a> <a id="3916" class="Keyword">where</a> <a id="3922" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a> <a id="3924" class="Symbol">→</a> <a id="3926" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a>
<a id="3928" class="Symbol">...</a> <a id="3932" class="Symbol">|</a> <a id="3934" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="3937" class="Symbol">_</a>     <a id="3943" class="Symbol">=</a> <a id="3945" class="Symbol">λ</a> <a id="3947" class="Keyword">where</a> <a id="3953" href="Nominal.Support.html#3554" class="InductiveConstructor">𝟘</a> <a id="3955" class="Symbol">→</a> <a id="3957" href="Nominal.Support.html#3598" class="InductiveConstructor">𝟚</a>
</pre></body></html>